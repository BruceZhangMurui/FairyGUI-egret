var fairygui;!function(t){var e=function(e){function n(){e.call(this),this._selectedIndex=0,this._previousIndex=0,this._pageIds=[],this._pageNames=[],this._selectedIndex=-1,this._previousIndex=-1}__extends(n,e);var s=__define,r=n;return p=r.prototype,s(p,"name",function(){return this._name},function(t){this._name=t}),s(p,"parent",function(){return this._parent}),s(p,"selectedIndex",function(){return this._selectedIndex},function(e){if(this._selectedIndex!=e){if(e>this._pageIds.length-1)throw"index out of bounds: "+e;if(this._previousIndex=this._selectedIndex,this._selectedIndex=e,this._parent.applyController(this),this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED)),this._playingTransition&&(this._playingTransition.stop(),this._playingTransition=null),this._pageTransitions){for(var i=this._pageTransitions.length,n=0;i>n;n++){var s=this._pageTransitions[n];if(s.toIndex==this._selectedIndex&&s.fromIndex==this._previousIndex){this._playingTransition=this.parent.getTransition(s.transitionName);break}}this._playingTransition&&this._playingTransition.play(function(){this._playingTransition=null},this)}}}),p.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this._previousIndex=this._selectedIndex,this._selectedIndex=t,this._parent.applyController(this),this._playingTransition&&(this._playingTransition.stop(),this._playingTransition=null)}},s(p,"previsousIndex",function(){return this._previousIndex}),s(p,"selectedPage",function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e}),p.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e)},s(p,"previousPage",function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]}),s(p,"pageCount",function(){return this._pageIds.length}),p.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},p.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},p.addPageAt=function(t,e){void 0===e&&(e=0);var i=""+n._nextPageId++;e==this._pageIds.length?(this._pageIds.push(i),this._pageNames.push(t)):(this._pageIds.splice(e,0,i),this._pageNames.splice(e,0,t))},p.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this))},p.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this)},p.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this._parent.applyController(this)},p.getPageIndexById=function(t){return this._pageIds.indexOf(t)},p.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},p.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},p.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},s(p,"selectedPageId",function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e}),s(p,"oppositePageId",void 0,function(t){var e=this._pageIds.indexOf(t);e>0?this.selectedIndex=0:this._pageIds.length>1&&(this.selectedIndex=1)}),s(p,"previousPageId",function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]}),p.setup=function(t){this._name=t.attributes.name;var e=0,n=0,s=t.attributes.pages;if(s){var r=s.split(","),a=r.length;for(e=0;a>e;e+=2)this._pageIds.push(r[e]),this._pageNames.push(r[e+1])}if(s=t.attributes.transitions)for(this._pageTransitions=new Array,r=s.split(","),a=r.length,e=0;a>e;e++)if(s=r[e]){var o=new i;n=s.indexOf("="),o.transitionName=s.substr(n+1),s=s.substring(0,n),n=s.indexOf("-"),o.toIndex=parseInt(s.substring(n+1)),s=s.substring(0,n),o.fromIndex="*"==s?-1:parseInt(s),this._pageTransitions.push(o)}this._selectedIndex=this._parent&&this._pageIds.length>0?0:-1},n._nextPageId=0,n}(egret.EventDispatcher);t.Controller=e,egret.registerClass(e,"fairygui.Controller");var i=function(){function t(){this.fromIndex=0,this.toIndex=0}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(i,"PageTransition")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.addDelay=0,this.rect=new egret.Rectangle}var e=(__define,t);return p=e.prototype,t}();t.Frame=e,egret.registerClass(e,"fairygui.Frame")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this.interval=0,this.repeatDelay=0,this._frameCount=0,this._currentFrame=0,this._start=0,this._end=0,this._times=0,this._endAt=0,this._status=0,this.$renderRegion=new egret.sys.Region,this._playState=new t.PlayState,this._playing=!0,this.touchEnabled=!1}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"frames",function(){return this._frames},function(t){this._frames=t,this._frameCount=null!=this._frames?this._frames.length:0,this._currentFrame=-1,this.setPlaySettings()}),n(p,"frameCount",function(){return this._frameCount}),n(p,"boundsRect",function(){return this._boundsRect},function(t){this._boundsRect=t}),n(p,"currentFrame",function(){return this._currentFrame},function(t){this._currentFrame!=t&&(this._currentFrame=t,this._playState.currentFrame=t,this.setFrame(this._currentFrame<this.frameCount?this._frames[this._currentFrame]:null))}),n(p,"playing",function(){return this._playing},function(e){this._playing=e,this.playing&&0!=this.frameCount&&3!=this._status?t.GTimers.inst.callBy24Fps(this.update,this):t.GTimers.inst.remove(this.update,this)}),p.setPlaySettings=function(e,i,n,s,r,a){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===n&&(n=0),void 0===s&&(s=-1),void 0===r&&(r=null),void 0===a&&(a=null),this._start=e,this._end=i,-1==this._end&&(this._end=this.frameCount-1),this._times=n,this._endAt=s,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._callback=r,this._callbackObj=a,this.currentFrame=e,this.playing&&0!=this.frameCount?t.GTimers.inst.callBy24Fps(this.update,this):t.GTimers.inst.remove(this.update,this)},p.update=function(){if(this.playing&&0!=this.frameCount&&3!=this._status){if(this._playState.update(this),this._currentFrame!=this._playState.currentFrame){if(1==this._status)this._currentFrame=this._start,this._playState.currentFrame=this._currentFrame,this._status=0;else if(2==this._status){if(this._currentFrame=this._endAt,this._playState.currentFrame=this._currentFrame,this._status=3,t.GTimers.inst.remove(this.update,this),null!=this._callback){var e=this._callback,i=this._callbackObj;this._callback=null,this._callbackObj=null,1==e.length?e.call(i,this):e.call(i)}}else this._currentFrame=this._playState.currentFrame,this._currentFrame==this._end&&this._times>0&&(this._times--,this._status=0==this._times?2:1);this.setFrame(this._frames[this._currentFrame])}}else this.setFrame(null)},p.setFrame=function(t){null==t?this._texture=null:(this._texture=t.texture,this._frameRect=t.rect),this.$invalidateContentBounds()},p.$render=function(t){var e=this._texture;if(e){var i=Math.round(e._offsetX)+this._frameRect.x,n=Math.round(e._offsetY)+this._frameRect.y,s=e._bitmapWidth,r=e._bitmapHeight,a=Math.round(e.$getScaleBitmapWidth()),o=Math.round(e.$getScaleBitmapHeight());t.drawImage(e._bitmapData,e._bitmapX,e._bitmapY,s,r,i,n,a,o)}},p.$measureContentBounds=function(t){if(this._texture){var e=Math.round(this._texture._offsetX)+this._frameRect.x,i=Math.round(this._texture._offsetY)+this._frameRect.y,n=this._texture.$getTextureWidth(),s=this._texture.$getTextureHeight();t.setTo(e,i,n,s)}else t.setEmpty()},i}(egret.DisplayObject);t.MovieClip=e,egret.registerClass(e,"fairygui.MovieClip")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.repeatedCount=0,this._curFrame=0,this._curFrameDelay=0}var e=__define,i=t;return p=i.prototype,p.update=function(t){var e=egret.getTimer(),i=e-this._lastTime;this._lastTime=e,this.reachEnding=!1,this.frameStarting=!1,this._curFrameDelay+=i;var n=this.reversed?t.frameCount-this._curFrame-1:this._curFrame,s=t.interval+t.frames[n].addDelay+(0==n&&this.repeatedCount>0?t.repeatDelay:0);this._curFrameDelay<s||(this._curFrameDelay=0,this._curFrame++,this.frameStarting=!0,this._curFrame>t.frameCount-1&&(this._curFrame=0,this.repeatedCount++,this.reachEnding=!0,t.swing&&(this.reversed=!this.reversed,this._curFrame++)))},e(p,"currentFrame",function(){return this._curFrame},function(t){this._curFrame=t,this._curFrameDelay=0}),p.rewind=function(){this._curFrame=0,this._curFrameDelay=0,this.reversed=!1,this.reachEnding=!1},p.reset=function(){this._curFrame=0,this._curFrameDelay=0,this.repeatedCount=0,this.reachEnding=!1,this.reversed=!1},p.copy=function(t){this._curFrame=t._curFrame,this._curFrameDelay=t._curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachEnding=t.reachEnding,this.reversed=t.reversed},t}();t.PlayState=e,egret.registerClass(e,"fairygui.PlayState")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this),this._owner=e,this.touchEnabled=!0,this.touchChildren=!0}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"owner",function(){return this._owner}),i(p,"hitArea",function(){return this._hitArea},function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null}),p.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);if(null==n&&this.touchEnabled&&null!=this._hitArea){var s=this.$getInvertedConcatenatedMatrix(),r=s.a*e+s.c*i+s.tx,a=s.b*e+s.d*i+s.ty;this._hitArea.contains(r,a)&&(n=this)}return n},e}(egret.DisplayObjectContainer);t.UIContainer=e,egret.registerClass(e,"fairygui.UIContainer",["fairygui.UIDisplayObject"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this),this._owner=e,this.touchEnabled=!1}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"owner",function(){return this._owner}),e}(egret.Bitmap);t.UIImage=e,egret.registerClass(e,"fairygui.UIImage",["fairygui.UIDisplayObject"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this),this._owner=e,this.touchEnabled=!1}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"owner",function(){return this._owner}),e}(t.MovieClip);t.UIMovieClip=e,egret.registerClass(e,"fairygui.UIMovieClip",["fairygui.UIDisplayObject"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this),this._owner=e,this.touchEnabled=!0,this.touchChildren=!0}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"owner",function(){return this._owner}),i(p,"hitArea",function(){return this._hitArea},function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null}),p.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);if(null==n&&this.touchEnabled&&null!=this._hitArea){var s=this.$getInvertedConcatenatedMatrix(),r=s.a*e+s.c*i+s.tx,a=s.b*e+s.d*i+s.ty;this._hitArea.contains(r,a)&&(n=this)}return n},e}(egret.Sprite);t.UISprite=e,egret.registerClass(e,"fairygui.UISprite",["fairygui.UIDisplayObject"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this),this.touchEnabled=!1,this.touchChildren=!1,this._owner=e,this.nativeTextField=new egret.TextField,this.addChild(this.nativeTextField)}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"owner",function(){return this._owner}),e}(egret.DisplayObjectContainer);t.UITextField=e,egret.registerClass(e,"fairygui.UITextField",["fairygui.UIDisplayObject"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=-1),t.call(this,e,!1),this.touchPointID=0,this.stageX=i,this.stageY=n,this.touchPointID=s}__extends(e,t);var i=(__define,e);return p=i.prototype,p.preventDefault=function(){this._prevented=!0},p.isDefaultPrevented=function(){return this._prevented},e.DRAG_START="__dragStart",e.DRAG_END="__dragEnd",e}(egret.Event);t.DragEvent=e,egret.registerClass(e,"fairygui.DragEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,e,!1),this.source=i}__extends(e,t);var i=(__define,e);return p=i.prototype,e.DROP="__drop",e}(egret.Event);t.DropEvent=e,egret.registerClass(e,"fairygui.DropEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i,n){t.call(this,e,!1),this._oldFocusedObject=i,this._newFocusedObject=n}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"oldFocusedObject",function(){return this._oldFocusedObject}),i(p,"newFocusedObject",function(){return this._newFocusedObject}),e.CHANGED="___focusChanged",e}(egret.Event);t.FocusChangeEvent=e,egret.registerClass(e,"fairygui.FocusChangeEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=0),void 0===s&&(s=0),t.call(this,e,!1),this.itemObject=i,this.stageX=n,this.stageY=s}__extends(e,t);var i=(__define,e);return p=i.prototype,e.CLICK="___itemClick",e}(egret.Event);t.ItemEvent=e,egret.registerClass(e,"fairygui.ItemEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this,e,!1)}__extends(e,t);var i=(__define,e);return p=i.prototype,e.CHANGED="___stateChanged",e}(egret.Event);t.StateChangeEvent=e,egret.registerClass(e,"fairygui.StateChangeEvent")}(fairygui||(fairygui={}));var fairygui;!function(t){function e(t){switch(t){case"Common":return 0;case"Check":return 1;case"Radio":return 2;default:return 0}}function i(t){switch(t){case"none":return 0;case"both":return 1;case"height":return 2;default:return 0}}function n(t){switch(t){case"left":return 0;case"center":return 1;case"right":return 2;default:return 0}}function s(t){return 0==t?egret.HorizontalAlign.LEFT:1==t?egret.HorizontalAlign.CENTER:egret.HorizontalAlign.RIGHT}function r(t){switch(t){case"top":return 0;case"middle":return 1;case"bottom":return 2;default:return 0}}function a(t){switch(t){case"none":return 0;case"scale":return 1;case"scaleFree":return 2;default:return 0}}function o(t){switch(t){case"column":return 0;case"row":return 1;case"flow_hz":return 2;case"flow_vt":return 3;default:return 0}}function h(t){switch(t){case"single":return 0;case"multiple":return 1;case"multipleSingleClick":return 2;case"none":return 3;default:return 0}}function l(t){switch(t){case"visible":return 0;case"hidden":return 1;case"scroll":return 2;case"scale":return 3;case"scaleFree":return 4;default:return 0}}function c(t){switch(t){case"image":return 0;case"movieclip":return 2;case"sound":return 3;case"component":return 4;case"swf":return 1;case"font":return 6;case"atlas":return 7;default:return 5}}function _(t){switch(t){case"percent":return 0;case"valueAndmax":return 1;case"value":return 2;case"max":return 3;default:return 0}}function u(t){switch(t){case"default":return 0;case"visible":return 1;case"auto":return 2;case"hidden":return 3;default:return 0}}function d(t){switch(t){case"horizontal":return 0;case"vertical":return 1;case"both":return 2;default:return 1}}function p(t){var e=g[t];return e||(e=egret.Ease.quartOut),e}!function(t){t[t.Common=0]="Common",t[t.Check=1]="Check",t[t.Radio=2]="Radio"}(t.ButtonMode||(t.ButtonMode={}));t.ButtonMode;!function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Height=2]="Height"}(t.AutoSizeType||(t.AutoSizeType={}));t.AutoSizeType;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(t.AlignType||(t.AlignType={}));t.AlignType;!function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(t.VertAlignType||(t.VertAlignType={}));t.VertAlignType;!function(t){t[t.None=0]="None",t[t.Scale=1]="Scale",t[t.ScaleFree=2]="ScaleFree"}(t.FillType||(t.FillType={}));t.FillType;!function(t){t[t.SingleColumn=0]="SingleColumn",t[t.SingleRow=1]="SingleRow",t[t.FlowHorizontal=2]="FlowHorizontal",t[t.FlowVertical=3]="FlowVertical"}(t.ListLayoutType||(t.ListLayoutType={}));t.ListLayoutType;!function(t){t[t.Single=0]="Single",t[t.Multiple=1]="Multiple",t[t.Multiple_SingleClick=2]="Multiple_SingleClick",t[t.None=3]="None"}(t.ListSelectionMode||(t.ListSelectionMode={}));t.ListSelectionMode;!function(t){t[t.Visible=0]="Visible",t[t.Hidden=1]="Hidden",t[t.Scroll=2]="Scroll",t[t.Scale=3]="Scale",t[t.ScaleFree=4]="ScaleFree"}(t.OverflowType||(t.OverflowType={}));t.OverflowType;!function(t){t[t.Image=0]="Image",t[t.Swf=1]="Swf",t[t.MovieClip=2]="MovieClip",t[t.Sound=3]="Sound",t[t.Component=4]="Component",t[t.Misc=5]="Misc",t[t.Font=6]="Font",t[t.Atlas=7]="Atlas"}(t.PackageItemType||(t.PackageItemType={}));t.PackageItemType;!function(t){t[t.Percent=0]="Percent",t[t.ValueAndMax=1]="ValueAndMax",t[t.Value=2]="Value",t[t.Max=3]="Max"}(t.ProgressTitleType||(t.ProgressTitleType={}));t.ProgressTitleType;!function(t){t[t.Default=0]="Default",t[t.Visible=1]="Visible",t[t.Auto=2]="Auto",t[t.Hidden=3]="Hidden"}(t.ScrollBarDisplayType||(t.ScrollBarDisplayType={}));t.ScrollBarDisplayType;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t[t.Both=2]="Both"}(t.ScrollType||(t.ScrollType={}));t.ScrollType;!function(t){t[t.Left_Left=0]="Left_Left",t[t.Left_Center=1]="Left_Center",t[t.Left_Right=2]="Left_Right",t[t.Center_Center=3]="Center_Center",t[t.Right_Left=4]="Right_Left",t[t.Right_Center=5]="Right_Center",t[t.Right_Right=6]="Right_Right",t[t.Top_Top=7]="Top_Top",t[t.Top_Middle=8]="Top_Middle",t[t.Top_Bottom=9]="Top_Bottom",t[t.Middle_Middle=10]="Middle_Middle",t[t.Bottom_Top=11]="Bottom_Top",t[t.Bottom_Middle=12]="Bottom_Middle",t[t.Bottom_Bottom=13]="Bottom_Bottom",t[t.Width=14]="Width",t[t.Height=15]="Height",t[t.LeftExt_Left=16]="LeftExt_Left",t[t.LeftExt_Right=17]="LeftExt_Right",t[t.RightExt_Left=18]="RightExt_Left",t[t.RightExt_Right=19]="RightExt_Right",t[t.TopExt_Top=20]="TopExt_Top",t[t.TopExt_Bottom=21]="TopExt_Bottom",t[t.BottomExt_Top=22]="BottomExt_Top",t[t.BottomExt_Bottom=23]="BottomExt_Bottom",t[t.Size=24]="Size"}(t.RelationType||(t.RelationType={}));t.RelationType;t.parseButtonMode=e,t.parseAutoSizeType=i,t.parseAlignType=n,t.getAlignTypeString=s,t.parseVertAlignType=r,t.parseFillType=a,t.parseListLayoutType=o,t.parseListSelectionMode=h,t.parseOverflowType=l,t.parsePackageItemType=c,t.parseProgressTitleType=_,t.parseScrollBarDisplayType=u,t.parseScrollType=d;var g={Linear:egret.Ease.sineIn,"Elastic.In":egret.Ease.elasticIn,"Elastic.Out":egret.Ease.elasticOut,"Elastic.InOut":egret.Ease.elasticInOut,"Quad.In":egret.Ease.quadIn,"Quad.Out":egret.Ease.quadOut,"Quad.InOut":egret.Ease.quadInOut,"Cube.In":egret.Ease.cubicIn,"Cube.Out":egret.Ease.cubicOut,"Cube.InOut":egret.Ease.cubicInOut,"Quart.In":egret.Ease.quartIn,"Quart.Out":egret.Ease.quartOut,"Quart.InOut":egret.Ease.quartInOut,"Quint.In":egret.Ease.quintIn,"Quint.Out":egret.Ease.quintOut,"Quint.InOut":egret.Ease.quintInOut,"Sine.In":egret.Ease.sineIn,"Sine.Out":egret.Ease.sineOut,"Sine.InOut":egret.Ease.sineInOut,"Bounce.In":egret.Ease.bounceIn,"Bounce.Out":egret.Ease.bounceOut,"Bounce.InOut":egret.Ease.bounceInOut,"Circ.In":egret.Ease.circIn,"Circ.Out":egret.Ease.circOut,"Circ.InOut":egret.Ease.circInOut,"Expo.In":egret.Ease.quartIn,"Expo.Out":egret.Ease.quartOut,"Expo.InOut":egret.Ease.quartInOut,"Back.In":egret.Ease.backIn,"Back.Out":egret.Ease.backOut,"Back.InOut":egret.Ease.backInOut};t.ParseEaseType=p}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(e){this._owner=e,this._pageSet=new t.PageOptionSet,this._easeType=egret.Ease.quadOut,this._tweenTime=.3}var i=__define,n=e;return p=n.prototype,i(p,"controller",function(){return this._controller},function(t){t!=this._controller&&(this._controller=t,this._pageSet.controller=t,this._pageSet.clear(),this._controller&&this.init())}),p.getPageSet=function(){return this._pageSet},i(p,"tween",function(){return this._tween},function(t){this._tween=t}),i(p,"tweenTime",function(){return this._tweenTime},function(t){this._tweenTime=t}),i(p,"easeType",function(){return this._easeType},function(t){this._easeType=t}),p.setup=function(e){if(this._controller=this._owner.parent.getController(e.attributes.controller),null!=this._controller){this.init();var i;i=e.attributes.pages;var n;n=i?i.split(","):[];for(var s=n.length,r=0;s>r;r++)i=n[r],this._pageSet.addById(i);i=e.attributes.tween,i&&(this._tween=!0),i=e.attributes.ease,i&&(this._easeType=t.ParseEaseType(i)),i=e.attributes.duration,i&&(this._tweenTime=parseFloat(i)),i=e.attributes.values;var a;a=i?e.attributes.values.split("|"):[];for(var o=0;o<a.length;o++)i=a[o],"-"!=i&&this.addStatus(n[o],i);i=e.attributes["default"],i&&this.addStatus(null,i)}},i(p,"connected",function(){return this._controller&&!this._pageSet.empty?this._pageSet.containsId(this._controller.selectedPageId):!1}),p.addStatus=function(){},p.init=function(){},p.apply=function(){},p.updateState=function(){},e}();t.GearBase=e,egret.registerClass(e,"fairygui.GearBase")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(t){e.call(this,t)}__extends(n,e);var s=(__define,n);return p=s.prototype,p.init=function(){this._default=new i(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},p.addStatus=function(t,e){var n,s=e.split(",");null==t?n=this._default:(n=new i,this._storage[t]=n),n.width=parseInt(s[0]),n.height=parseInt(s[1]),s.length>2&&(n.scaleX=parseFloat(s[2]),n.scaleY=parseFloat(s[3]))},p.apply=function(){var e,n=this.connected;if(n?(e=this._storage[this._controller.selectedPageId],e||(e=this._default)):e=this._default,this._tweener&&this._tweener.tick(1e8),this._tween&&!t.UIPackage._constructing&&n&&this._pageSet.containsId(this._controller.previousPageId)){var s=e.width!=this._owner.width||e.height!=this._owner.height,r=e.scaleX!=this._owner.scaleX||e.scaleY!=this._owner.scaleY;if(s||r){this._owner.internalVisible++;var a={onChange:function(){this._owner._gearLocked=!0,s&&this._owner.setSize(this._tweenValue.width,this._tweenValue.height,this._owner.gearXY.controller==this._controller),r&&this._owner.setScale(this._tweenValue.scaleX,this._tweenValue.scaleY),this._owner._gearLocked=!1},onChangeObj:this};null==this._tweenValue&&(this._tweenValue=new i),this._tweenValue.width=this._owner.width,this._tweenValue.height=this._owner.height,this._tweenValue.scaleX=this._owner.scaleX,this._tweenValue.scaleY=this._owner.scaleY,this._tweener=egret.Tween.get(this._tweenValue,a).to({width:e.width,height:e.height,scaleX:e.scaleX,scaleY:e.scaleY},1e3*this._tweenTime,this._easeType).call(function(){this._owner.internalVisible--,this._tweener=null},this)}}else this._owner._gearLocked=!0,this._owner.setSize(e.width,e.height,this._owner.gearXY.controller==this._controller),this._owner.setScale(e.scaleX,e.scaleY),this._owner._gearLocked=!1},p.updateState=function(){if(!this._owner._gearLocked){var t;this.connected?(t=this._storage[this._controller.selectedPageId],t||(t=new i,this._storage[this._controller.selectedPageId]=t)):t=this._default,t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY}},n}(t.GearBase);t.GearSize=e,egret.registerClass(e,"fairygui.GearSize");var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(i,"GearSizeValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(t){e.call(this,t)}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(){this._default=new egret.Point(this._owner.x,this._owner.y),this._storage={}},p.addStatus=function(t,e){var i,n=e.split(",");null==t?i=this._default:(i=new egret.Point,this._storage[t]=i),i.x=parseInt(n[0]),i.y=parseInt(n[1])},p.apply=function(){var e,i=this.connected;if(i?(e=this._storage[this._controller.selectedPageId],e||(e=this._default)):e=this._default,this._tweener&&this._tweener.tick(1e8),this._tween&&!t.UIPackage._constructing&&i&&this._pageSet.containsId(this._controller.previousPageId)){if(this._owner.x!=e.x||this._owner.y!=e.y){this._owner.internalVisible++;var n={onChange:function(){this._owner._gearLocked=!0,this._owner.setXY(this._tweenValue.x,this._tweenValue.y),this._owner._gearLocked=!1},onChangeObj:this};null==this._tweenValue&&(this._tweenValue=new egret.Point),this._tweenValue.x=this._owner.x,this._tweenValue.y=this._owner.y,this._tweener=egret.Tween.get(this._tweenValue,n).to({x:e.x,y:e.y},1e3*this._tweenTime,this._easeType).call(function(){this._owner.internalVisible--,this._tweener=null},this)}}else this._owner._gearLocked=!0,this._owner.setXY(e.x,e.y),this._owner._gearLocked=!1},p.updateState=function(){if(!this._owner._gearLocked){if(this.connected){var t=this._storage[this._controller.selectedPageId];t||(t=new egret.Point,this._storage[this._controller.selectedPageId]=t)}else t=this._default;t.x=this._owner.x,t.y=this._owner.y}},p.updateFromRelations=function(t,e){for(var i in this._storage){var n=this._storage[i];n.x+=t,n.y+=e}this._default.x+=t,this._default.y+=e,this.updateState()},i}(t.GearBase);t.GearXY=e,egret.registerClass(e,"fairygui.GearXY")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._ownerBaseX=0,this._ownerBaseY=0,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._options=0,this.OPTION_IGNORE_DISPLAY_CONTROLLER=1,this.FRAME_RATE=24,this._owner=t,this._items=new Array}var s=__define,r=e;return p=r.prototype,s(p,"name",function(){return this._name},function(t){this._name=t}),p.play=function(t,e,i,n,s){if(void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===s&&(s=0),this.stop(),0>=n&&(n=1),this._totalTimes=n,this.internalPlay(s),this._playing=this._totalTasks>0,this._playing){if(this._onComplete=t,this._onCompleteParam=i,this._onCompleteObj=e,this._owner.internalVisible++,0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var r=this._items.length,a=0;r>a;a++){var o=this._items[a];null!=o.target&&o.target!=this._owner&&o.target.internalVisible++}}else null!=t&&(t.length>0?t.call(this._onCompleteObj,i):t(this._onCompleteObj))},p.stop=function(e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var s=this._onComplete,r=this._onCompleteParam,a=this._onCompleteObj;this._onComplete=null,this._onCompleteParam=null,this._onCompleteObj=null,this._owner.internalVisible--;for(var o=this._items.length,h=0;o>h;h++){var l=this._items[h];if(null!=l.target&&(0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER)&&l.target!=this._owner&&l.target.internalVisible--,!l.completed))if(null!=l.tweener&&(l.tweener.setPaused(!0),l.tweener=null),l.type==i.Transition){var c=l.target.getTransition(l.value.s);null!=c&&c.stop(e,!1)}else l.type==i.Shake?t.GTimers.inst.exists(this.__shake,l)&&(t.GTimers.inst.remove(this.__shake,l),l.target._gearLocked=!0,l.target.setXY(l.target.x-l.startValue.f1,l.target.y-l.startValue.f2),l.target._gearLocked=!1):e&&(l.tween?l.yoyo&&l.repeat%2!=0?this.applyValue(l,l.startValue):this.applyValue(l,l.endValue):l.type!=i.Sound&&this.applyValue(l,l.value))}n&&null!=s&&(s.length>0?s.call(a,r):s.call(a))}},s(p,"playing",function(){return this._playing}),p.setValue=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var s,r=this._items.length,a=0;r>a;a++){var o=this._items[a];if(null!=o.label||null!=o.label2){if(o.label==t)s=o.tween?o.startValue:o.value;else{if(o.label2!=t)continue;s=o.endValue}switch(o.type){case i.XY:case i.Size:case i.Pivot:case i.Scale:s.b1=!0,s.b2=!0,s.f1=parseFloat(e[0]),s.f2=parseFloat(e[1]);break;case i.Alpha:s.f1=parseFloat(e[0]);break;case i.Rotation:s.i=parseInt(e[0]);break;case i.Color:s.c=parseFloat(e[0]);break;case i.Animation:s.i=parseInt(e[0]),e.length>1&&(s.b=e[1]);break;case i.Visible:s.b=e[0];break;case i.Controller:s.s=e[0];break;case i.Sound:s.s=e[0],e.length>1&&(s.f1=parseFloat(e[1]));break;case i.Transition:s.s=e[0],e.length>1&&(s.i=parseInt(e[1]));break;case i.Shake:s.f1=parseFloat(e[0]),e.length>1&&(s.f2=parseFloat(e[1]))}}}},p.setHook=function(t,e,i){for(var n=this._items.length,s=0;n>s;s++){var r=this._items[s];(null!=r.label||null!=r.label2)&&(r.label==t?(r.hook=e,r.hookObj=i):r.label2==t&&(r.hook2=e,r.hook2Obj=i))}},p.clearHooks=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.hook=null,i.hookObj=null,i.hook2=null,i.hook2Obj=null}},p.setTarget=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];(null!=s.label||null!=s.label2)&&(s.targetId=e.id)}},p.updateFromRelations=function(t,e,n){var s=this._items.length;if(0!=s)for(var r=0;s>r;r++){var a=this._items[r];a.type==i.XY&&a.targetId==t&&(a.tween?(a.startValue.b1&&(a.startValue.f1+=e),a.startValue.b2&&(a.startValue.f2+=n),a.endValue.b1&&(a.endValue.f1+=e),a.endValue.b2&&(a.endValue.f2+=n)):(a.value.b1&&(a.value.f1+=e),a.value.b2&&(a.value.f2+=n)))}},p.internalPlay=function(t){this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;for(var e=this._items.length,n=0;e>n;n++){var s=this._items[n];if(s.target=s.targetId?this._owner.getChildById(s.targetId):this._owner,null!=s.target){var r=t+1e3*s.time;if(s.tween)switch(s.completed=!1,s.type){case i.XY:case i.Size:this._totalTasks++,0==r?this.startTween(s):s.tweener=egret.Tween.get(s.value).wait(r).call(this.__delayCall,this,[s]);break;case i.Scale:case i.Alpha:case i.Rotation:this._totalTasks++;var a={};this.prepareValue(s,a),s.tweener=egret.Tween.get(s.value),r>0?s.tweener.wait(r):this.applyValue(s,s.value),s.tweener.call(this.__tweenStart,this,[s]).to(a,1e3*s.duration,s.easeType),s.repeat>0?(s.tweenTimes=0,s.tweener.call(this.__tweenRepeatComplete,this,[s])):s.tweener.call(this.__tweenComplete,this,[s])}else 0==r?this.applyValue(s,s.value):(s.completed=!1,this._totalTasks++,s.tweener=egret.Tween.get(s.value).wait(r).call(this.__delayCall2,this,[s]))}}},p.prepareValue=function(t,e,n){if(void 0===n&&(n=!1),n)switch(t.type){case i.XY:e.f1=t.startValue.b1?t.startValue.f1:t.value.f1,e.f2=t.startValue.b2?t.startValue.f2:t.value.f2;break;case i.Size:e.f1=t.startValue.b1?t.startValue.f1:t.value.f1,e.f2=t.startValue.b2?t.startValue.f2:t.value.f2;break;case i.Scale:e.f1=t.startValue.f1,e.f2=t.startValue.f2;break;case i.Alpha:e.f1=t.startValue.f1;break;case i.Rotation:e.i=t.startValue.i}else switch(t.type){case i.XY:t.target==this._owner?(t.value.f1=t.startValue.b1?t.startValue.f1:0,t.value.f2=t.startValue.b2?t.startValue.f2:0):(t.startValue.b1||(t.startValue.f1=t.target.x),t.value.f1=t.startValue.f1,t.startValue.b2||(t.startValue.f2=t.target.y),t.value.f2=t.startValue.f2),e.f1=t.endValue.b1?t.endValue.f1:t.value.f1,e.f2=t.endValue.b2?t.endValue.f2:t.value.f2;break;case i.Size:t.startValue.b1||(t.startValue.f1=t.target.width),t.value.f1=t.startValue.f1,t.startValue.b2||(t.startValue.f2=t.target.height),t.value.f2=t.startValue.f2,e.f1=t.endValue.b1?t.endValue.f1:t.value.f1,e.f2=t.endValue.b2?t.endValue.f2:t.value.f2;break;case i.Scale:t.value.f1=t.startValue.f1,t.value.f2=t.startValue.f2,e.f1=t.endValue.f1,e.f2=t.endValue.f2;break;case i.Alpha:t.value.f1=t.startValue.f1,e.f1=t.endValue.f1;break;case i.Rotation:t.value.i=t.startValue.i,e.i=t.endValue.i}},p.startTween=function(t){var e,i;e={},i={},this.prepareValue(t,i),this.applyValue(t,t.value),e.onChange=this.__tweenUpdate,e.onChangeObj=[this,t],t.tweener=egret.Tween.get(t.value,e),t.tweener.to(i,1e3*t.duration,t.easeType),t.repeat>0?(t.tweenTimes=0,t.tweener.call(this.__tweenRepeatComplete,this,[t])):t.tweener.call(this.__tweenComplete,this,[t]),null!=t.hook&&t.hook.call(t.hookObj)
},p.__delayCall=function(t){t.tweener=null,this.startTween(t)},p.__delayCall2=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.call(t.hookObj),this.checkAllComplete()},p.__tweenStart=function(t){null!=t.tweener&&(null!=t.hook&&t.hook.call(t.hookObj),t.tweener.addEventListener("change",this.__tweenUpdate,[this,t]))},p.__tweenUpdate=function(){var t=this,e=t[0],i=t[1];e.applyValue(i,i.value)},p.__tweenComplete=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,null!=t.hook2&&t.hook2.call(t.hook2Obj),this.checkAllComplete()},p.__tweenRepeatComplete=function(t){if(t.tweenTimes++,t.tweenTimes<t.repeat+1){var e,i;e={},i={},e.onChange=this.__tweenUpdate,e.onChangeObj=[this,t],this.prepareValue(t,i,t.yoyo&&t.tweenTimes%2==1),t.tweener=egret.Tween.get(t.value,e),t.tweener.to(i,1e3*t.duration,t.easeType).call(this.__tweenRepeatComplete,this,[t])}else this.__tweenComplete(t)},p.__playTransComplete=function(t){this._totalTasks--,t.completed=!0,this.checkAllComplete()},p.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)egret.callLater(this.internalPlay,this,0);else if(this._totalTimes--,this._totalTimes>0)egret.callLater(this.internalPlay,this,0);else{this._playing=!1,this._owner.internalVisible--;var t=this._items.length;if(0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var e=0;t>e;e++){var i=this._items[e];null!=i.target&&i.target!=this._owner&&i.target.internalVisible--}if(null!=this._onComplete){var n=this._onComplete,s=this._onCompleteParam,r=this._onCompleteObj;this._onComplete=null,this._onCompleteParam=null,this._onCompleteObj=null,n.length>0?n.call(r,s):n.call(r)}}},p.applyValue=function(e,n){switch(e.target._gearLocked=!0,e.type){case i.XY:if(e.target==this._owner){var s=0,r=0;s=n.b1?n.f1+this._ownerBaseX:e.target.x,r=n.b2?n.f2+this._ownerBaseY:e.target.y,e.target.setXY(s,r)}else n.b1||(n.f1=e.target.x),n.b2||(n.f2=e.target.y),e.target.setXY(n.f1,n.f2);break;case i.Size:n.b1||(n.f1=e.target.width),n.b2||(n.f2=e.target.height),e.target.setSize(n.f1,n.f2);break;case i.Pivot:e.target.setPivot(n.f1,n.f2);break;case i.Alpha:e.target.alpha=n.f1;break;case i.Rotation:e.target.rotation=n.i;break;case i.Scale:e.target.setScale(n.f1,n.f2);break;case i.Color:e.target.color=n.c;break;case i.Animation:n.b1||(n.i=e.target.frame),e.target.frame=n.i,e.target.playing=n.b;break;case i.Visible:e.target.visible=n.b;break;case i.Controller:for(var a=n.s.split(","),o=a.length,h=0;o>h;h++){var l=a[h],c=l.split("="),_=e.target.getController(c[0]);_&&(l=c[1],"$"==l.charAt(0)?(l=l.substring(1),_.selectedPage=l):_.selectedIndex=parseInt(l))}break;case i.Transition:var u=e.target.getTransition(n.s);null!=u&&(0==n.i?u.stop(!1,!0):u.playing?u._totalTimes=n.i:(e.completed=!1,this._totalTasks++,u.play(this.__playTransComplete,this,e.value.i)));break;case i.Sound:var d=t.UIPackage.getItemByURL(n.s);if(d){var p=d.owner.getItemAsset(d);p&&t.GRoot.inst.playOneShotSound(p,n.f1)}break;case i.Shake:e.startValue.f1=0,e.startValue.f2=0,e.startValue.f3=e.value.f2,e.startValue.i=egret.getTimer(),t.GTimers.inst.add(1,0,this.__shake,e,this),this._totalTasks++,e.completed=!1}e.target._gearLocked=!1},p.__shake=function(t){var e=this;t.__shakeItem(e)},p.__shakeItem=function(e){var i=Math.ceil(e.value.f1*e.startValue.f3/e.value.f2),n=(2*Math.random()-1)*i,s=(2*Math.random()-1)*i;n=n>0?Math.ceil(n):Math.floor(n),s=s>0?Math.ceil(s):Math.floor(s),e.target._gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1+n,e.target.y-e.startValue.f2+s),e.target._gearLocked=!1,e.startValue.f1=n,e.startValue.f2=s;var r=egret.getTimer();e.startValue.f3-=(r-e.startValue.i)/1e3,e.startValue.i=r,e.startValue.f3<=0&&(e.target._gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1,e.target.y-e.startValue.f2),e.target._gearLocked=!1,e.completed=!0,this._totalTasks--,t.GTimers.inst.remove(this.__shake,e),this.checkAllComplete())},p.setup=function(e){this.name=e.attributes.name;var s=e.attributes.options;s&&(this._options=parseInt(s));for(var r=e.children,a=r.length,o=0;a>o;o++){var h=r[o];if("item"==h.name){var l=new n;switch(this._items.push(l),l.time=parseInt(h.attributes.time)/this.FRAME_RATE,l.targetId=h.attributes.target,s=h.attributes.type){case"XY":l.type=i.XY;break;case"Size":l.type=i.Size;break;case"Scale":l.type=i.Scale;break;case"Pivot":l.type=i.Pivot;break;case"Alpha":l.type=i.Alpha;break;case"Rotation":l.type=i.Rotation;break;case"Color":l.type=i.Color;break;case"Animation":l.type=i.Animation;break;case"Visible":l.type=i.Visible;break;case"Controller":l.type=i.Controller;break;case"Sound":l.type=i.Sound;break;case"Transition":l.type=i.Transition;break;case"Shake":l.type=i.Shake;break;default:l.type=i.Unknown}if(l.tween="true"==h.attributes.tween,l.label=h.attributes.label,l.tween){l.duration=parseInt(h.attributes.duration)/this.FRAME_RATE,s=h.attributes.ease,s&&(l.easeType=t.ParseEaseType(s)),s=h.attributes.repeat,s&&(l.repeat=parseInt(s)),l.yoyo="true"==h.attributes.yoyo,l.label2=h.attributes.label2;var c=h.attributes.endValue;c?(this.decodeValue(l.type,h.attributes.startValue,l.startValue),this.decodeValue(l.type,c,l.endValue)):(l.tween=!1,this.decodeValue(l.type,h.attributes.startValue,l.value))}else this.decodeValue(l.type,h.attributes.value,l.value)}}},p.decodeValue=function(e,n,s){var r;switch(e){case i.XY:case i.Size:case i.Pivot:r=n.split(","),"-"==r[0]?s.b1=!1:(s.f1=parseInt(r[0]),s.b1=!0),"-"==r[1]?s.b2=!1:(s.f2=parseInt(r[1]),s.b2=!0);break;case i.Alpha:s.f1=parseFloat(n);break;case i.Rotation:s.i=parseInt(n);break;case i.Scale:r=n.split(","),s.f1=parseFloat(r[0]),s.f2=parseFloat(r[1]);break;case i.Color:s.c=t.ToolSet.convertFromHtmlColor(n);break;case i.Animation:r=n.split(","),"-"==r[0]?s.b1=!1:(s.i=parseInt(r[0]),s.b1=!0),s.b="p"==r[1];break;case i.Visible:s.b="true"==n;break;case i.Controller:s.s=n;break;case i.Sound:if(r=n.split(","),s.s=r[0],r.length>1){var a=parseInt(r[1]);s.f1=0==a||100==a?1:a/100}else s.f1=1;break;case i.Transition:r=n.split(","),s.s=r[0],s.i=r.length>1?parseInt(r[1]):1;break;case i.Shake:r=n.split(","),s.f1=parseFloat(r[0]),s.f2=parseFloat(r[1])}},e}();t.Transition=e,egret.registerClass(e,"fairygui.Transition");var i=function(){function t(){}var e=(__define,t);return p=e.prototype,t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Controller=9,t.Sound=10,t.Transition=11,t.Shake=12,t.Unknown=13,t}();egret.registerClass(i,"TransitionActionType");var n=function(){function t(){this.time=0,this.type=0,this.duration=0,this.repeat=0,this.yoyo=!1,this.tween=!1,this.tweenTimes=0,this.completed=!1,this.easeType=egret.Ease.quadOut,this.value=new s,this.startValue=new s,this.endValue=new s}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(n,"TransitionItem");var s=function(){function t(){this.f1=0,this.f2=0,this.f3=0,this.i=0,this.c=0,this.b=!1,this.b1=!0,this.b2=!0}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(s,"TransitionValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._x=0,this._y=0,this._width=0,this._height=0,this._pivotX=0,this._pivotY=0,this._alpha=1,this._rotation=0,this._visible=!0,this._touchable=!0,this._grayed=!1,this._draggable=!1,this._scaleX=1,this._scaleY=1,this._pivotOffsetX=0,this._pivotOffsetY=0,this._sortingOrder=0,this._internalVisible=1,this._focusable=!1,this._rawWidth=0,this._rawHeight=0,this._sourceWidth=0,this._sourceHeight=0,this._initWidth=0,this._initHeight=0,this._id=""+i._gInstanceCounter++,this._name="",this.createDisplayObject(),this._relations=new t.Relations(this),this._gearDisplay=new t.GearDisplay(this),this._gearXY=new t.GearXY(this),this._gearSize=new t.GearSize(this),this._gearLook=new t.GearLook(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"id",function(){return this._id}),n(p,"name",function(){return this._name},function(t){this._name=t}),n(p,"x",function(){return this._x},function(t){this.setXY(t,this._y)}),n(p,"y",function(){return this._y},function(t){this.setXY(this._x,t)}),p.setXY=function(e,n){if(this._x!=e||this._y!=n){var s=e-this._x,r=n-this._y;this._x=e,this._y=n,this.handleXYChanged(),this instanceof t.GGroup&&this.moveChildren(s,r),this._gearXY.controller&&this._gearXY.updateState(),!this._parent||this._parent instanceof t.GList||(this._parent.setBoundsChangedFlag(),this.dispatchEventWith(i.XY_CHANGED))}},p.center=function(e){void 0===e&&(e=!1);var i;null!=this._parent?i=this.parent:(i=this.root,null==i&&(i=t.GRoot.inst)),this.setXY((i.width-this.width)/2,(i.height-this.height)/2),e&&(this.addRelation(i,3),this.addRelation(i,10))},n(p,"width",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},function(t){this.setSize(t,this._rawHeight)}),n(p,"height",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},function(t){this.setSize(this._rawWidth,t)}),p.setSize=function(t,e,n){if(void 0===n&&(n=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,0>t&&(t=0),0>e&&(e=0);var s=t-this._width,r=e-this._height;this._width=t,this._height=e,0==this._pivotX&&0==this._pivotY||0==this.sourceWidth||0==this.sourceHeight||(n||this.setXY(this.x-this._pivotX*s/this.sourceWidth,this.y-this._pivotY*r/this.sourceHeight),this.applyPivot()),this.handleSizeChanged(),this._gearSize.controller&&this._gearSize.updateState(),this._parent&&(this._relations.onOwnerSizeChanged(s,r),this._parent.setBoundsChangedFlag()),this.dispatchEventWith(i.SIZE_CHANGED)}},p.ensureSizeCorrect=function(){},n(p,"sourceHeight",function(){return this._sourceHeight}),n(p,"sourceWidth",function(){return this._sourceWidth}),n(p,"initHeight",function(){return this._initHeight}),n(p,"initWidth",function(){return this._initWidth}),n(p,"actualWidth",function(){return this.width*this._scaleX}),n(p,"actualHeight",function(){return this.height*this._scaleY}),n(p,"scaleX",function(){return this._scaleX},function(t){this.setScale(t,this._scaleY)}),n(p,"scaleY",function(){return this._scaleY},function(t){this.setScale(this._scaleX,t)}),p.setScale=function(t,e){(this._scaleX!=t||this._scaleY!=e)&&(this._scaleX=t,this._scaleY=e,this.applyPivot(),this.handleSizeChanged(),this._gearSize.controller&&this._gearSize.updateState())},n(p,"pivotX",function(){return this._pivotX},function(t){this.setPivot(t,this._pivotY)}),n(p,"pivotY",function(){return this._pivotY},function(t){this.setPivot(this._pivotX,t)}),p.setPivot=function(t,e){void 0===e&&(e=0),(this._pivotX!=t||this._pivotY!=e)&&(this._pivotX=t,this._pivotY=e,this.applyPivot())},p.applyPivot=function(){var t=this._pivotOffsetX,e=this._pivotOffsetY;if(0!=this._pivotX||0!=this._pivotY){var i=this.normalizeRotation;if(0!=i||1!=this._scaleX||1!=this._scaleY){var n=i*Math.PI/180,s=Math.cos(n),r=Math.sin(n),a=this._scaleX*s,o=this._scaleX*r,h=this._scaleY*-r,l=this._scaleY*s,c=0!=this.sourceWidth?this._width/this.sourceWidth:1,_=0!=this.sourceHeight?this._height/this.sourceHeight:1,u=this._pivotX*c,d=this._pivotY*_;this._pivotOffsetX=u-(a*u+h*d),this._pivotOffsetY=d-(l*d+o*u)}else this._pivotOffsetX=0,this._pivotOffsetY=0}else this._pivotOffsetX=0,this._pivotOffsetY=0;(t!=this._pivotOffsetX||e!=this._pivotOffsetY)&&this.handleXYChanged()},n(p,"touchable",function(){return this._touchable},function(e){this._touchable=e,this instanceof t.GImage||this instanceof t.GMovieClip||!(!(this instanceof t.GTextField)||this instanceof t.GTextInput||this instanceof t.GRichTextField)||null!=this._displayObject&&(this._displayObject.touchEnabled=this._touchable,this._displayObject instanceof egret.DisplayObjectContainer&&(this._displayObject.touchChildren=this._touchable))}),n(p,"grayed",function(){return this._grayed},function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayChanged())}),n(p,"enabled",function(){return!this._grayed&&this._touchable},function(t){this.grayed=!t,this.touchable=t}),n(p,"rotation",function(){return this._rotation},function(t){this._rotation!=t&&(this._rotation=t,this.applyPivot(),this._displayObject&&(this._displayObject.rotation=this.normalizeRotation),this._gearLook.controller&&this._gearLook.updateState())}),n(p,"normalizeRotation",function(){var t=this._rotation%360;return t>180?t-=360:-180>t&&(t=360+t),t}),n(p,"alpha",function(){return this._alpha},function(t){this._alpha=t,this._displayObject&&(this._displayObject.alpha=this._alpha)}),n(p,"visible",function(){return this._visible},function(t){this._visible!=t&&(this._visible=t,this._displayObject&&(this._displayObject.visible=this._visible),this._parent&&this._parent.childStateChanged(this))}),n(p,"internalVisible",function(){return this._internalVisible},function(t){0>t&&(t=0);var e=this._internalVisible>0,i=t>0;this._internalVisible=t,e!=i&&this._parent&&this._parent.childStateChanged(this)}),n(p,"finalVisible",function(){return this._visible&&this._internalVisible>0&&(!this._group||this._group.finalVisible)}),n(p,"sortingOrder",function(){return this._sortingOrder},function(t){if(0>t&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}}),n(p,"focusable",function(){return this._focusable},function(t){this._focusable=t}),n(p,"focused",function(){var t=this.root;return t?t.focus==this:!1}),p.requestFocus=function(){var t=this.root;if(t){for(var e=this;e&&!e._focusable;)e=e.parent;null!=e&&(t.focus=e)}},n(p,"tooltips",function(){return this._tooltips},function(t){this._tooltips=t}),n(p,"inContainer",function(){return null!=this._displayObject&&null!=this._displayObject.parent}),n(p,"onStage",function(){return null!=this._displayObject&&null!=this._displayObject.stage}),n(p,"resourceURL",function(){return null!=this._packageItem?"ui://"+this._packageItem.owner.id+this._packageItem.id:null}),n(p,"group",function(){return this._group},function(t){this._group=t}),n(p,"gearDisplay",function(){return this._gearDisplay}),n(p,"gearXY",function(){return this._gearXY}),n(p,"gearSize",function(){return this._gearSize}),n(p,"gearLook",function(){return this._gearLook}),n(p,"relations",function(){return this._relations}),p.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},p.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},n(p,"displayObject",function(){return this._displayObject}),p.setDisplayObject=function(t){this._displayObject=t},n(p,"parent",function(){return this._parent},function(t){this._parent=t}),p.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},n(p,"root",function(){for(var e=this._parent;e;){if(e instanceof t.GRoot)return e;e=e.parent}return null}),n(p,"asCom",function(){return this}),n(p,"asButton",function(){return this}),n(p,"asLabel",function(){return this}),n(p,"asProgress",function(){return this}),n(p,"asTextField",function(){return this}),n(p,"asRichTextField",function(){return this}),n(p,"asTextInput",function(){return this}),n(p,"asLoader",function(){return this}),n(p,"asList",function(){return this}),n(p,"asGraph",function(){return this}),n(p,"asGroup",function(){return this}),n(p,"asSlider",function(){return this}),n(p,"asComboBox",function(){return this}),n(p,"asMovieClip",function(){return this}),n(p,"text",function(){return null},function(){}),p.dispose=function(){this._relations.dispose()},p.addClickListener=function(t,e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},p.removeClickListener=function(t,e){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},p.hasClickListener=function(){return this.hasEventListener(egret.TouchEvent.TOUCH_TAP)},p.addEventListener=function(t,i,n){e.prototype.addEventListener.call(this,t,i,n),null!=this._displayObject&&this._displayObject.addEventListener(t,this._reDispatch,this)},p.removeEventListener=function(t,i,n){e.prototype.removeEventListener.call(this,t,i,n),null==this._displayObject||this.hasEventListener(t)||this._displayObject.removeEventListener(t,this._reDispatch,this)},p._reDispatch=function(t){this.dispatchEvent(t)},n(p,"draggable",function(){return this._draggable},function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())}),n(p,"dragBounds",function(){return this._dragBounds},function(t){this._dragBounds=t}),p.startDrag=function(t,e){void 0===t&&(t=null),void 0===e&&(e=-1),null!=this._displayObject.stage&&this.dragBegin(null)},p.stopDrag=function(){this.dragEnd()},n(p,"dragging",function(){return i.sDragging==this}),p.localToGlobal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var s=this._displayObject.localToGlobal(e*t.GRoot.contentScaleFactor,i*t.GRoot.contentScaleFactor,n);return s.x/=t.GRoot.contentScaleFactor,s.y/=t.GRoot.contentScaleFactor,s},p.globalToLocal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var s=this._displayObject.globalToLocal(e*t.GRoot.contentScaleFactor,i*t.GRoot.contentScaleFactor,n);return s.x/=t.GRoot.contentScaleFactor,s.y/=t.GRoot.contentScaleFactor,s},p.getGlobalRect=function(t){t||(t=new egret.Rectangle);var e=this.localToGlobal(0,0,i.sHelperPoint);return t.x=e.x,t.y=e.y,e=this.localToGlobal(this.width,this.height,i.sHelperPoint),t.right=e.x,t.bottom=e.y,t},p.handleControllerChanged=function(t){this._gearDisplay.controller==t&&this._gearDisplay.apply(),this._gearXY.controller==t&&this._gearXY.apply(),this._gearSize.controller==t&&this._gearSize.apply(),this._gearLook.controller==t&&this._gearLook.apply()},p.createDisplayObject=function(){},p.handleXYChanged=function(){this._displayObject&&(this._displayObject.x=(this._x+this._pivotOffsetX)*t.GRoot.contentScaleFactor,this._displayObject.y=(this._y+this._pivotOffsetY)*t.GRoot.contentScaleFactor)},p.handleSizeChanged=function(){},p.handleGrayChanged=function(){this._displayObject},p.constructFromResource=function(t){this._packageItem=t},p.setup_beforeAdd=function(t){var e,i;this._id=t.attributes.id,this._name=t.attributes.name,e=t.attributes.xy,i=e.split(","),this.setXY(parseInt(i[0]),parseInt(i[1])),e=t.attributes.size,e&&(i=e.split(","),this._initWidth=parseInt(i[0]),this._initHeight=parseInt(i[1]),this.setSize(this._initWidth,this._initHeight)),e=t.attributes.scale,e&&(i=e.split(","),this.setScale(parseFloat(i[0]),parseFloat(i[1]))),e=t.attributes.rotation,e&&(this.rotation=parseInt(e)),e=t.attributes.pivot,e&&(i=e.split(","),this.setPivot(parseInt(i[0]),parseInt(i[1]))),e=t.attributes.alpha,e&&(this.alpha=parseFloat(e)),this.touchable="false"!=t.attributes.touchable,this.visible="false"!=t.attributes.visible,this.grayed="true"==t.attributes.grayed,this.tooltips=t.attributes.tooltips},p.setup_afterAdd=function(t){var e,i=t.attributes.group;i&&(this._group=this._parent.getChildById(i));var n=t.children;if(n)for(var s=n.length,r=0;s>r;r++){var e=n[r];"gearDisplay"==e.name?this._gearDisplay.setup(e):"gearXY"==e.name?this._gearXY.setup(e):"gearSize"==e.name?this._gearSize.setup(e):"gearLook"==e.name&&this._gearLook.setup(e)}},p.initDrag=function(){this._draggable?this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this):this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this)},p.dragBegin=function(e){null!=i.sDragging&&i.sDragging.stopDrag(),null!=e?(i.sGlobalDragStart.x=e.stageX/t.GRoot.contentScaleFactor,i.sGlobalDragStart.y=e.stageY/t.GRoot.contentScaleFactor):(i.sGlobalDragStart.x=t.GRoot.mouseX/t.GRoot.contentScaleFactor,i.sGlobalDragStart.y=t.GRoot.mouseY/t.GRoot.contentScaleFactor),this.getGlobalRect(i.sGlobalRect),i.sDragging=this,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this)},p.dragEnd=function(){i.sDragging==this&&(t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this),i.sDragging=null)},p.reset=function(){t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},p.__begin=function(){t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},p.__end=function(){this.reset()},p.__moving=function(e){this.reset();var i=new t.DragEvent(t.DragEvent.DRAG_START);i.stageX=e.stageX,i.stageY=e.stageY,i.touchPointID=e.touchPointID,this.dispatchEvent(i),i.isDefaultPrevented()||this.dragBegin(e)},p.__moving2=function(e){var n=e.stageX/t.GRoot.contentScaleFactor-i.sGlobalDragStart.x+i.sGlobalRect.x,s=e.stageY/t.GRoot.contentScaleFactor-i.sGlobalDragStart.y+i.sGlobalRect.y;null!=this._dragBounds&&(n<this._dragBounds.x?n=this._dragBounds.x:n+i.sGlobalRect.width>this._dragBounds.right&&(n=this._dragBounds.right-i.sGlobalRect.width,n<this._dragBounds.x&&(n=this._dragBounds.x)),s<this._dragBounds.y?s=this._dragBounds.y:s+i.sGlobalRect.height>this._dragBounds.bottom&&(s=this._dragBounds.bottom-i.sGlobalRect.height,s<this._dragBounds.y&&(s=this._dragBounds.y))),this.parent.globalToLocal(n,s,i.sHelperPoint),this.setXY(Math.round(i.sHelperPoint.x),Math.round(i.sHelperPoint.y))},p.__end2=function(e){if(i.sDragging==this){this.stopDrag();var n=new t.DragEvent(t.DragEvent.DRAG_END);n.stageX=e.stageX,n.stageY=e.stageY,n.touchPointID=e.touchPointID,this.dispatchEvent(n)}},i._gInstanceCounter=0,i.XY_CHANGED="__xyChanged",i.SIZE_CHANGED="__sizeChanged",i.SIZE_DELAY_CHANGE="__sizeDelayChange",i.sGlobalDragStart=new egret.Point,i.sGlobalRect=new egret.Rectangle,i.sHelperPoint=new egret.Point,i}(egret.EventDispatcher);t.GObject=e,egret.registerClass(e,"fairygui.GObject")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.width=0,this.height=0}var e=(__define,t);return p=e.prototype,p.load=function(){return this.owner.getItemAsset(this)},p.toString=function(){return this.name},t}();t.PackageItem=e,egret.registerClass(e,"fairygui.PackageItem")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._sortingChildCount=0,this._bounds=new egret.Rectangle,this._children=new Array,this._controllers=new Array,this._transitions=new Array,this._margin=new t.Margin,this.opaque=!0}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.createDisplayObject=function(){this._rootContainer=new t.UIContainer(this),this.setDisplayObject(this._rootContainer),this._container=this._rootContainer},p.dispose=function(){for(var t=this._children.length,i=t-1;i>=0;--i)this._children[i].dispose();null!=this._scrollPane&&this._scrollPane.dispose(),e.prototype.dispose.call(this)},n(p,"displayListContainer",function(){return this._container}),p.addChild=function(t){return this.addChildAt(t,this._children.length),t},p.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw"child is null";var i=this._children.length;if(e>=0&&i>=e){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this._sortingChildCount>0&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw"Invalid child index"},p.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;e>i;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},p.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},p.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var i=this._children[t];return i.parent=null,0!=i.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),i.inContainer&&this._container.removeChild(i.displayObject),e&&i.dispose(),this.setBoundsChangedFlag(),i}throw"Invalid child index"},p.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildAt(t,i)},p.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this._children[t];throw"Invalid child index"},p.getChild=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},p.getVisibleChild=function(t){for(var e=this._children.length,i=0;e>i;++i){var n=this._children[i];if(n.finalVisible&&n.name==t)return n}return null},p.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;i>n;++n){var s=this._children[n];if(s.group==e&&s.name==t)return s}return null},p.getChildById=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i]._id==t)return this._children[i];return null},p.getChildIndex=function(t){return this._children.indexOf(t)},p.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0==t.sortingOrder){var n=this._children.length;this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},p._setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this._children.length;if(i>n&&(i=n),e!=i&&(this._children.splice(e,1),this._children.splice(i,0,t),t.inContainer)){for(var s=0,r=0;i>r;r++){var a=this._children[r];a.inContainer&&s++}s==this._container.numChildren&&s--,this._container.setChildIndex(t.displayObject,s),this.setBoundsChangedFlag()}},p.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},p.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},n(p,"numChildren",function(){return this._children.length}),p.addController=function(t){this._controllers.push(t),t._parent=this,this.applyController(t)},p.getController=function(t){for(var e=this._controllers.length,i=0;e>i;++i){var n=this._controllers[i];if(n.name==t)return n}return null},p.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t._parent=null,this._controllers.splice(e,1);for(var i=this._children.length,n=0;i>n;n++){var s=this._children[n];s.handleControllerChanged(t)}},n(p,"controllers",function(){return this._controllers}),p.childStateChanged=function(e){if(!this._buildingDisplayList)if(e instanceof t.GGroup)for(var i=this._children.length,n=0;i>n;n++){var s=this._children[n];s.group==e&&this.childStateChanged(s)}else if(e.displayObject)if(e.finalVisible){if(!e.displayObject.parent){for(var r=0,a=this._children.length,o=0;a>o&&(s=this._children[o],s!=e);o++)s.displayObject&&s.displayObject.parent&&r++;this._container.addChildAt(e.displayObject,r)}}else e.displayObject.parent&&this._container.removeChild(e.displayObject)},p.applyController=function(t){for(var e,i=this._children.length,n=0;i>n;n++)e=this._children[n],e.handleControllerChanged(t)},p.applyAllControllers=function(){for(var t=this._controllers.length,e=0;t>e;++e)this.applyController(this._controllers[e])},p.getTransition=function(t){for(var e=this._transitions.length,i=0;e>i;++i){var n=this._transitions[i];if(n.name==t)return n}return null},p.isChildInView=function(t){return null!=this._rootContainer.mask?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null!=this._scrollPane?this._scrollPane.isChildInView(t):!0},n(p,"scrollPane",function(){return this._scrollPane}),n(p,"opaque",function(){return this._opaque},function(t){this._opaque!=t?(this._opaque=t,this._opaque&&this.updateOpaque()):this._rootContainer.hitArea=null}),p.updateOpaque=function(){this._rootContainer.hitArea||(this._rootContainer.hitArea=new egret.Rectangle),this._rootContainer.hitArea.setTo(0,0,this.width*t.GRoot.contentScaleFactor,this.height*t.GRoot.contentScaleFactor)},p.updateMask=function(){var e;e=this._rootContainer.mask?this._rootContainer.mask:new egret.Rectangle;var i=this._margin.left*t.GRoot.contentScaleFactor,n=this._margin.top*t.GRoot.contentScaleFactor,s=(this.width-(this._margin.left+this._margin.right))*t.GRoot.contentScaleFactor,r=(this.height-(this._margin.top+this._margin.bottom))*t.GRoot.contentScaleFactor;e.setTo(i,n,s,r),this._rootContainer.mask=e},p.setupOverflowAndScroll=function(e,i,n,s,r){void 0===r&&(r=0),1==e?(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container),this.updateMask(),this._container.x=this._margin.left*t.GRoot.contentScaleFactor,this._container.y=this._margin.top*t.GRoot.contentScaleFactor):2==e?(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container),this._scrollPane=new t.ScrollPane(this,n,this._margin,i,s,r)):(0!=this._margin.left||0!=this._margin.top)&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container),this._container.x=this._margin.left*t.GRoot.contentScaleFactor,this._container.y=this._margin.top*t.GRoot.contentScaleFactor),this.setBoundsChangedFlag()},p.handleSizeChanged=function(){this._scrollPane?this._scrollPane.setSize(this.width,this.height):null!=this._rootContainer.mask&&this.updateMask(),this._opaque&&this.updateOpaque(),this._rootContainer.scaleX=this.scaleX,this._rootContainer.scaleY=this.scaleY},p.handleGrayChanged=function(){var t=this.getController("grayed");if(null!=t)return void(t.selectedIndex=this.grayed?1:0);for(var e=this.grayed,i=this._children.length,n=0;i>n;++n)this._children[n].grayed=e},p.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,egret.callLater(this.__render,this)))},p.__render=function(){this._boundsChanged&&this.updateBounds()},p.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},p.updateBounds=function(){var t,e,i,n=0;if(this._children.length>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=0,o=this._children.length;for(h=0;o>h;h++)l=this._children[h],l.ensureSizeCorrect();for(var h=0;o>h;h++){var l=this._children[h];a=l.x,t>a&&(t=a),a=l.y,e>a&&(e=a),a=l.x+l.actualWidth,a>s&&(s=a),a=l.y+l.actualHeight,a>r&&(r=a)}i=s-t,n=r-e}else t=0,e=0,i=0,n=0;t!=this._bounds.x||e!=this._bounds.y||i!=this._bounds.width||n!=this._bounds.height?this.setBounds(t,e,i,n):this._boundsChanged=!1},p.setBounds=function(t,e,i,n){void 0===n&&(n=0),this._boundsChanged=!1,this._bounds.x=t,this._bounds.y=e,this._bounds.width=i,this._bounds.height=n,this._scrollPane&&this._scrollPane.setContentSize(this._bounds.x+this._bounds.width,this._bounds.y+this._bounds.height)},n(p,"bounds",function(){return this._boundsChanged&&this.updateBounds(),this._bounds}),n(p,"viewWidth",function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right}),n(p,"viewHeight",function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom}),p.findObjectNear=function(t,e,i){return i||(i=new egret.Point),i.x=t,i.y=e,i},p.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),s=this.getInsertPosForSortingChild(t);s>n?this._setChildIndex(t,n,s-1):this._setChildIndex(t,n,s)}},p.constructFromResource=function(t){this._packageItem=t,this.constructFromXML(this._packageItem.owner.getItemAsset(this._packageItem))
},p.constructFromXML=function(e){this._underConstruct=!0;var i,n;i=e.attributes.size,n=i.split(","),this._sourceWidth=parseInt(n[0]),this._sourceHeight=parseInt(n[1]),this._initWidth=this._sourceWidth,this._initHeight=this._sourceHeight;var s;i=e.attributes.overflow,s=i?t.parseOverflowType(i):0;var r;i=e.attributes.scroll,r=i?t.parseScrollType(i):1;var a;i=e.attributes.scrollBar,a=i?t.parseScrollBarDisplayType(i):0;var o;i=e.attributes.scrollBarFlags,o=i?parseInt(i):0;var h;2==s&&(h=new t.Margin,i=e.attributes.scrollBarMargin,i&&h.parse(i)),i=e.attributes.margin,i&&this._margin.parse(i),this.setSize(this._sourceWidth,this._sourceHeight),this.setupOverflowAndScroll(s,h,r,a,o),this._buildingDisplayList=!0;var l=e.children;if(l){for(var c,_=null,u=l.length,d=0;u>d;d++){var p=l[d];"displayList"!=p.name?"controller"==p.name&&(c=new t.Controller,this._controllers.push(c),c._parent=this,c.setup(p)):_=p.children}if(_)for(var g,f=_.length,v=0;f>v;v++)p=_[v],g=this.constructChild(p),g&&(g._underConstruct=!0,g._constructingData=p,g.setup_beforeAdd(p),this.addChild(g));for(this.relations.setup(e),f=this._children.length,v=0;f>v;v++)g=this._children[v],g.relations.setup(g._constructingData);for(v=0;f>v;v++)g=this._children[v],g.setup_afterAdd(g._constructingData),g._underConstruct=!1,g._constructingData=null;var m;for(d=0;u>d;d++){var p=l[d];"transition"==p.name&&(m=new t.Transition(this),this._transitions.push(m),m.setup(p))}}for(this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,u=this._children.length,d=0;u>d;d++){var y=this._children[d];null!=y.displayObject&&y.finalVisible&&this._container.addChild(y.displayObject)}},p.constructChild=function(e){var i,n=e.attributes.pkg,s=this._packageItem.owner;if(n&&n!=s.id){if(i=t.UIPackage.getById(n),!i)return null}else i=s;var r=e.attributes.src;if(r){var a=i.getItem(r);if(!a)return null;var o=i.createObject2(a);return o}var h=e.name;return o="text"==h&&"true"==e.attributes.input?new t.GTextInput:t.UIObjectFactory.newObject2(h)},i}(t.GObject);t.GComponent=e,egret.registerClass(e,"fairygui.GComponent")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._mode=0,this._title="",this._icon="",this._sound=t.UIConfig.buttonSound,this._soundVolumeScale=t.UIConfig.buttonSoundVolumeScale,this._pageOption=new t.PageOption,this._changeStateOnClick=!0}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"icon",function(){return this._icon},function(e){this._icon=e,e=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,this._iconObject instanceof t.GLoader?this._iconObject.url=e:this._iconObject instanceof t.GLabel?this._iconObject.icon=e:this._iconObject instanceof i&&(this._iconObject.icon=e)}),n(p,"selectedIcon",function(){return this._selectedIcon},function(e){this._selectedIcon=e,e=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,this._iconObject instanceof t.GLoader?this._iconObject.url=e:this._iconObject instanceof t.GLabel?this._iconObject.icon=e:this._iconObject instanceof i&&(this._iconObject.icon=e)}),n(p,"title",function(){return this._title},function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)}),n(p,"text",function(){return this.title},function(t){this.title=t}),n(p,"selectedTitle",function(){return this._selectedTitle},function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)}),n(p,"titleColor",function(){return this._titleObject instanceof t.GTextField?this._titleObject.color:this._titleObject instanceof t.GLabel?this._titleObject.titleColor:this._titleObject instanceof i?this._titleObject.titleColor:0},function(e){this._titleObject instanceof t.GTextField?this._titleObject.color=e:this._titleObject instanceof t.GLabel?this._titleObject.titleColor=e:this._titleObject instanceof i&&(this._titleObject.titleColor=e)}),n(p,"sound",function(){return this._sound},function(t){this._sound=t}),n(p,"soundVolumeScale",function(){return this._soundVolumeScale},function(t){this._soundVolumeScale=t}),n(p,"menuItemGrayed",function(){return this._menuItemGrayed},function(t){this._menuItemGrayed!=t&&(this._menuItemGrayed=t,this._titleObject&&(this._titleObject.grayed=this._menuItemGrayed),this._iconObject&&(this._iconObject.grayed=this._menuItemGrayed))}),n(p,"selected",function(){return this._selected},function(e){if(0!=this._mode&&this._selected!=e){if(this._selected=e,this.setState(this._selected?this._over?i.SELECTED_OVER:i.DOWN:this._over?i.OVER:i.UP),this._selectedTitle&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var n=this._selected?this._selectedIcon:this._icon;this._iconObject instanceof t.GLoader?this._iconObject.url=n:this._iconObject instanceof t.GLabel?this._iconObject.icon=n:this._iconObject instanceof i&&(this._iconObject.icon=n)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?this._relatedController.selectedPageId=this._pageOption.id:1==this._mode&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}}),n(p,"mode",function(){return this._mode},function(t){this._mode!=t&&(0==t&&(this.selected=!1),this._mode=t)}),n(p,"relatedController",function(){return this._relatedController},function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())}),n(p,"pageOption",function(){return this._pageOption}),n(p,"changeStateOnClick",function(){return this._changeStateOnClick},function(t){this._changeStateOnClick=t}),n(p,"linkedPopup",function(){return this._linkedPopup},function(t){this._linkedPopup=t}),p.addStateListener=function(e,i){this.addEventListener(t.StateChangeEvent.CHANGED,e,i)},p.removeStateListener=function(e,i){this.removeEventListener(t.StateChangeEvent.CHANGED,e,i)},p.fireClick=function(e){void 0===e&&(e=!0),e&&0==this._mode&&(this.setState(i.OVER),t.GTimers.inst.add(100,1,this.setState,this,i.DOWN),t.GTimers.inst.add(200,1,this.setState,this,i.UP)),this.__click(null)},p.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._relatedController==t&&(this.selected=this._pageOption.id==t.selectedPageId)},p.handleGrayChanged=function(){null!=this._buttonController.getPageIdByName(i.DISABLED)?this.setState(i.DISABLED):e.prototype.handleGrayChanged.call(this)},p.constructFromXML=function(n){e.prototype.constructFromXML.call(this,n),n=t.ToolSet.findChildNode(n,"Button");var s;s=n.attributes.mode,s&&(this._mode=t.parseButtonMode(s)),s=n.attributes.sound,null!=s&&(this._sound=s),s=n.attributes.volume,s&&(this._soundVolumeScale=parseInt(s)/100),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),0==this._mode&&this.setState(i.UP),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__click,this)},p.setup_afterAdd=function(i){if(e.prototype.setup_afterAdd.call(this,i),i=t.ToolSet.findChildNode(i,"Button")){var n;this.title=i.attributes.title,this.icon=i.attributes.icon,n=i.attributes.selectedTitle,n&&(this.selectedTitle=n),n=i.attributes.selectedIcon,n&&(this.selectedIcon=n),n=i.attributes.titleColor,n&&(this.titleColor=t.ToolSet.convertFromHtmlColor(n)),n=i.attributes.controller,this._relatedController=n?this._parent.getController(i.attributes.controller):null,this._pageOption.id=i.attributes.page,this.selected="true"==i.attributes.checked}},p.__rollover=function(){this._menuItemGrayed||(this._over=!0,this._down||this.setState(this._selected?i.SELECTED_OVER:i.OVER))},p.__rollout=function(){this._menuItemGrayed||(this._over=!1,this._down||this.setState(this._selected?i.DOWN:i.UP))},p.__mousedown=function(){if(this._down=!0,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),0==this._mode&&this.setState(i.DOWN),null!=this._linkedPopup)if(this._linkedPopup instanceof t.Window)this._linkedPopup.toggleStatus();else{var e=this.root;e&&e.togglePopup(this._linkedPopup,this)}},p.__mouseup=function(){this._down&&(t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._down=!1,this.setState(this._over?this._selected?i.SELECTED_OVER:i.OVER:this._selected?i.DOWN:i.UP))},p.__click=function(){if(this._sound){var e=t.UIPackage.getItemByURL(this._sound);if(e){var i=e.owner.getItemAsset(e);i&&t.GRoot.inst.playOneShotSound(i,this._soundVolumeScale)}}this._changeStateOnClick&&!this._menuItemGrayed&&(1==this._mode?(this.selected=!this._selected,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))):2==this._mode&&(this._selected||(this.selected=!0,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED)))))},i.UP="up",i.DOWN="down",i.OVER="over",i.SELECTED_OVER="selectedOver",i.DISABLED="disabled",i}(t.GComponent);t.GButton=e,egret.registerClass(e,"fairygui.GButton")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._visibleItemCount=0,this._selectedIndex=0,this._visibleItemCount=t.UIConfig.defaultComboBoxVisibleItemCount,this._itemsUpdated=!0,this._selectedIndex=-1,this._items=[],this._values=[]}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"text",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t)}),n(p,"titleColor",function(){return this._titleObject?this._titleObject.color:0},function(t){this._titleObject&&(this._titleObject.color=t)}),n(p,"visibleItemCount",function(){return this._visibleItemCount},function(t){this._visibleItemCount=t}),n(p,"items",function(){return this._items},function(t){t?this._items=t.concat():this._items.length=0,this._items.length>0?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex]):this.text="",this._itemsUpdated=!0}),n(p,"values",function(){return this._values},function(t){t?this._values=t.concat():this._values.length=0}),n(p,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.text=this.selectedIndex>=0&&this.selectedIndex<this._items.length?this._items[this._selectedIndex]:"")}),n(p,"value",function(){return this._values[this._selectedIndex]},function(t){this.selectedIndex=this._values.indexOf(t)}),p.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},p.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.ToolSet.findChildNode(i,"ComboBox");var n;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),n=i.attributes.dropdown){if(this._dropdownObject=t.UIPackage.createObjectFromURL(n),!this._dropdownObject)return void console.error("下拉框必须为元件");if(this._dropdownObject.name="this._dropdownObject",this._list=this._dropdownObject.getChild("list").asList,null==this._list)return void console.error(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.addEventListener(t.ItemEvent.CLICK,this.__clickItem,this),this._list.addRelation(this._dropdownObject,14),this._list.removeRelation(this._dropdownObject,15),this._dropdownObject.addRelation(this._list,15),this._dropdownObject.removeRelation(this._list,14),this._dropdownObject.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__popupWinClosed,this)}this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this)},p.setup_afterAdd=function(i){if(e.prototype.setup_afterAdd.call(this,i),i=t.ToolSet.findChildNode(i,"ComboBox")){var n;n=i.attributes.titleColor,n&&(this.titleColor=t.ToolSet.convertFromHtmlColor(n)),n=i.attributes.visibleItemCount,n&&(this._visibleItemCount=parseInt(n));var s=i.children;if(s)for(var r=s.length,a=0;r>a;a++){var o=s[a];this._items.push(o.attributes.title),this._values.push(o.attributes.value)}n=i.attributes.title,n?(this.text=n,this._selectedIndex=this._items.indexOf(n)):this._items.length>0?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1}},p.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildren();for(var e=this._items.length,i=0;e>i;i++){var n=this._list.addItemFromPool();n.name=i<this._values.length?this._values[i]:"",n.text=this._items[i]}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1,this._dropdownObject.width=this.width;var s=this.root;s&&s.togglePopup(this._dropdownObject,this,!0),this._dropdownObject.parent&&this.setState(t.GButton.DOWN)},p.__popupWinClosed=function(){this.setState(this._over?t.GButton.OVER:t.GButton.UP)},p.__clickItem=function(t){egret.setTimeout(this.__clickItem2,this,100,this._list.getChildIndex(t.itemObject))},p.__clickItem2=function(e){this._dropdownObject.parent instanceof t.GRoot&&this._dropdownObject.parent.hidePopup(),this._selectedIndex=e,this.text=this._selectedIndex>=0?this._items[this._selectedIndex]:"",this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))},p.__rollover=function(){this._over=!0,this._down||this._dropdownObject&&this._dropdownObject.parent||this.setState(t.GButton.OVER)},p.__rollout=function(){this._over=!1,this._down||this._dropdownObject&&this._dropdownObject.parent||this.setState(t.GButton.UP)},p.__mousedown=function(){this._down=!0,t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._dropdownObject&&this.showDropdown()},p.__mouseup=function(){this._down&&(this._down=!1,t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._dropdownObject&&!this._dropdownObject.parent&&this.setState(this._over?t.GButton.OVER:t.GButton.UP))},i}(t.GComponent);t.GComboBox=e,egret.registerClass(e,"fairygui.GComboBox")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this,e)}__extends(e,t);var n=(__define,e);return p=n.prototype,p.init=function(){this._default=new i(this._owner.playing,this._owner.frame),this._storage={}},p.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n);var s=e.split(",");n.frame=parseInt(s[0]),n.playing="p"==s[1]},p.apply=function(){this._owner._gearLocked=!0;var t;this.connected?(t=this._storage[this._controller.selectedPageId],t||(t=this._default)):t=this._default,this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},p.updateState=function(){if(!this._owner._gearLocked){var t,e=this._owner;this.connected?(t=this._storage[this._controller.selectedPageId],t||(t=new i,this._storage[this._controller.selectedPageId]=t)):t=this._default,t.frame=e.frame,t.playing=e.playing}},e}(t.GearBase);t.GearAnimation=e,egret.registerClass(e,"fairygui.GearAnimation");var i=function(){function t(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(i,"GearAnimationValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(t){e.call(this,t),this._default=0}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(){this._default=this._owner.color,this._storage={}},p.addStatus=function(e,i){var n=t.ToolSet.convertFromHtmlColor(i);null==e?this._default=n:this._storage[e]=n},p.apply=function(){if(this._owner._gearLocked=!0,this.connected){var t=this._storage[this._controller.selectedPageId];this._owner.color=Math.floor(void 0!=t?t:this._default)}else this._owner.color=this._default;this._owner._gearLocked=!1},p.updateState=function(){this._owner._gearLocked||(this.connected?this._storage[this._controller.selectedPageId]=this._owner.color:this._default=this._owner.color)},i}(t.GearBase);t.GearColor=e,egret.registerClass(e,"fairygui.GearColor")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(e){t.call(this,e)}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"connected",function(){return this._controller&&!this._pageSet.empty?this._pageSet.containsId(this._controller.selectedPageId):!0}),p.apply=function(){this.connected?this._owner.internalVisible++:this._owner.internalVisible=0},e}(t.GearBase);t.GearDisplay=e,egret.registerClass(e,"fairygui.GearDisplay")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(t){e.call(this,t)}__extends(n,e);var s=(__define,n);return p=s.prototype,p.init=function(){this._default=new i(this._owner.alpha,this._owner.rotation,this._owner.grayed),this._storage={}},p.addStatus=function(t,e){var n,s=e.split(",");null==t?n=this._default:(n=new i,this._storage[t]=n),n.alpha=parseFloat(s[0]),n.rotation=parseInt(s[1]),n.grayed="1"==s[2]?!0:!1},p.apply=function(){var e,i=this.connected;if(i?(e=this._storage[this._controller.selectedPageId],e||(e=this._default)):e=this._default,this._tweener&&this._tweener.tick(1e8),this._tween&&!t.UIPackage._constructing&&i&&this._pageSet.containsId(this._controller.previousPageId)){this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner._gearLocked=!1;var n=e.alpha!=this._owner.alpha,s=e.rotation!=this._owner.rotation;if(n||s){this._owner.internalVisible++;var r={onChange:function(){this._owner._gearLocked=!0,n&&(this._owner.alpha=this._tweenValue.x),s&&(this._owner.rotation=this._tweenValue.y),this._owner._gearLocked=!1},onChangeObj:this};null==this._tweenValue&&(this._tweenValue=new egret.Point),this._tweenValue.x=this._owner.alpha,this._tweenValue.y=this._owner.rotation,this._tweener=egret.Tween.get(this._tweenValue,r).to({x:e.alpha,y:e.rotation},1e3*this._tweenTime,this._easeType).call(function(){this._owner.internalVisible--,this._tweener=null},this)}}else this._owner._gearLocked=!0,this._owner.grayed=e.grayed,this._owner.alpha=e.alpha,this._owner.rotation=e.rotation,this._owner._gearLocked=!1},p.updateState=function(){if(!this._owner._gearLocked){var t;this.connected?(t=this._storage[this._controller.selectedPageId],t||(t=new i,this._storage[this._controller.selectedPageId]=t)):t=this._default,t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed}},n}(t.GearBase);t.GearLook=e,egret.registerClass(e,"fairygui.GearLook");var i=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),this.alpha=t,this.rotation=e,this.grayed=i}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(i,"GearLookValue")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._type=0,this._lineSize=0,this._lineColor=0,this._fillColor=0,this._lineSize=1,this._lineAlpha=1,this._fillAlpha=1,this._fillColor=16777215}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"graphics",function(){return this._graphics?this._graphics:(this.delayCreateDisplayObject(),this._graphics=this.displayObject.graphics,this._graphics)}),p.drawRect=function(t,e,i,n,s,r){void 0===r&&(r=null),this._type=1,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=s,this._corner=r,this.drawCommon()},p.drawEllipse=function(t,e,i,n,s){this._type=2,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=s,this._corner=null,this.drawCommon()},p.clearGraphics=function(){this._graphics&&(this._type=0,this._graphics.clear())},p.drawCommon=function(){this.graphics,this._graphics.clear();var e=this.width*this.scaleX*t.GRoot.contentScaleFactor,i=this.height*this.scaleY*t.GRoot.contentScaleFactor;if(0!=e&&0!=i){{Math.ceil(Math.min(this._lineSize*t.GRoot.contentScaleFactor,this._lineSize*t.GRoot.contentScaleFactor))}0==this._lineSize?this._graphics.lineStyle(0,0,0):this._graphics.lineStyle(this._lineSize,this._lineColor,this._lineAlpha),this._graphics.beginFill(this._fillColor,this._fillAlpha),1==this._type?this._corner?1==this._corner.length?this._graphics.drawRoundRect(0,0,e,i,this._corner[0],this._corner[0]):this._graphics.drawRoundRect(0,0,e,i,this._corner[0],this._corner[1]):this._graphics.drawRect(0,0,e,i):this._graphics.drawEllipse(0,0,e,i),this._graphics.endFill()}},p.replaceMe=function(t){if(!this._parent)throw"parent not set";t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},p.addBeforeMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},p.addAfterMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},p.setNativeObject=function(t){this.delayCreateDisplayObject(),this.displayObject.addChild(t)},p.delayCreateDisplayObject=function(){this.displayObject?(this.displayObject.graphics.clear(),this.displayObject.removeChildren(),this._graphics=null):(this.setDisplayObject(new t.UISprite(this)),this._parent&&this._parent.childStateChanged(this),this.handleXYChanged(),this.displayObject.alpha=this.alpha,this.displayObject.rotation=this.rotation,this.displayObject.visible=this.visible,this.displayObject.touchEnabled=this.touchable,this.displayObject.touchChildren=this.touchable,this.displayObject.hitArea=new egret.Rectangle(0,0,this.width,this.height))},p.handleSizeChanged=function(){this._graphics&&0!=this._type&&this.drawCommon(),this.displayObject instanceof t.UISprite&&(null==this.displayObject.hitArea?this.displayObject.hitArea=new egret.Rectangle(0,0,this.width,this.height):(this.displayObject.hitArea.width=this.width,this.displayObject.hitArea.height=this.height))},p.setup_beforeAdd=function(i){var n,s=i.attributes.type;if(s&&"empty"!=s&&this.setDisplayObject(new t.UISprite(this)),e.prototype.setup_beforeAdd.call(this,i),null!=this.displayObject){this._graphics=this.displayObject.graphics;var n;if(n=i.attributes.lineSize,n&&(this._lineSize=parseInt(n)),n=i.attributes.lineColor){var r=t.ToolSet.convertFromHtmlColor(n,!0);this._lineColor=16777215&r,this._lineAlpha=(r>>24&255)/255}n=i.attributes.fillColor,n&&(r=t.ToolSet.convertFromHtmlColor(n,!0),this._fillColor=16777215&r,this._fillAlpha=(r>>24&255)/255);var a;n=i.attributes.corner,n&&(a=n.split(","),this._corner=a.length>1?[parseInt(a[0]),parseInt(a[1])]:[parseInt(a[0])]),this._type="rect"==s?1:2,this.drawCommon()}},i}(t.GObject);t.GGraph=e,egret.registerClass(e,"fairygui.GGraph")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.updateBounds=function(){if(!this._updating&&this.parent){var t,e=this._parent.numChildren,i=0,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0;for(this._empty=!0,i=0;e>i;i++)t=this._parent.getChildAt(i),t.group==this&&(o=t.x,n>o&&(n=o),o=t.y,s>o&&(s=o),o=t.x+t.width,o>r&&(r=o),o=t.y+t.height,o>a&&(a=o),this._empty=!1);this._updating=!0,this._empty?this.setSize(0,0):(this.setXY(n,s),this.setSize(r-n,a-s)),this._updating=!1}},p.moveChildren=function(t,e){if(!this._updating&&this.parent){this._updating=!0;var i,n=this._parent.numChildren,s=0;for(s=0;n>s;s++)i=this._parent.getChildAt(s),i.group==this&&i.setXY(i.x+t,i.y+e);this._updating=!1}},e}(t.GObject);t.GGroup=e,egret.registerClass(e,"fairygui.GGroup")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._color=16777215,this._gearColor=new t.GearColor(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,null!=this._gearColor.controller&&this._gearColor.updateState(),this.applyColor())}),p.applyColor=function(){},n(p,"gearColor",function(){return this._gearColor}),p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._gearColor.controller==t&&this._gearColor.apply()},p.createDisplayObject=function(){this._content=new t.UIImage(this),this.setDisplayObject(this._content)},p.dispose=function(){e.prototype.dispose.call(this)},p.constructFromResource=function(t){this._packageItem=t,this._sourceWidth=this._packageItem.width,this._sourceHeight=this._packageItem.height,this._initWidth=this._sourceWidth,this._initHeight=this._sourceHeight,this._content.scale9Grid=t.scale9Grid,this._content.smoothing=t.smoothing,t.scaleByTile&&(this._content.fillMode=egret.BitmapFillMode.REPEAT),this.setSize(this._sourceWidth,this._sourceHeight),t.load(),this._content.texture=t.texture},p.handleSizeChanged=function(){this._content.width=this.width*this.scaleX,this._content.height=this.height*this.scaleY,this._content.scaleX=this._content.scaleY=t.GRoot.contentScaleFactor},p.setup_beforeAdd=function(i){e.prototype.setup_beforeAdd.call(this,i);var n;n=i.attributes.color,n&&(this.color=t.ToolSet.convertFromHtmlColor(n))},p.setup_afterAdd=function(t){e.prototype.setup_afterAdd.call(this,t);var i=t.children;if(i)for(var n=i.length,s=0;n>s;s++){var r=i[s];if("gearColor"==r.name){this._gearColor.setup(r);break}}},i}(t.GObject);t.GImage=e,egret.registerClass(e,"fairygui.GImage",["fairygui.IColorGear"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"icon",function(){return this._iconObject instanceof t.GLoader?this._iconObject.url:this._iconObject instanceof i?this._iconObject.icon:this._iconObject instanceof t.GButton?this._iconObject.icon:void 0},function(e){this._iconObject instanceof t.GLoader?this._iconObject.url=e:this._iconObject instanceof i?this._iconObject.icon=e:this._iconObject instanceof t.GButton&&(this._iconObject.icon=e)}),n(p,"title",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t)}),n(p,"text",function(){return this.title},function(t){this.title=t}),n(p,"titleColor",function(){return this._titleObject instanceof t.GTextField?this._titleObject.color:this._titleObject instanceof i?this._titleObject.titleColor:this._titleObject instanceof t.GButton?this._titleObject.titleColor:0},function(e){this._titleObject instanceof t.GTextField?this._titleObject.color=e:this._titleObject instanceof i?this._titleObject.titleColor=e:this._titleObject instanceof t.GButton&&(this._titleObject.titleColor=e)}),n(p,"editable",function(){return this._titleObject&&this._titleObject instanceof t.GTextInput?this._titleObject.asTextInput.editable:!1},function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t)}),p.constructFromXML=function(t){e.prototype.constructFromXML.call(this,t),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},p.setup_afterAdd=function(i){if(e.prototype.setup_afterAdd.call(this,i),i=t.ToolSet.findChildNode(i,"Label")){this.text=i.attributes.title,this.icon=i.attributes.icon;var n;n=i.attributes.titleColor,n&&(this.titleColor=t.ToolSet.convertFromHtmlColor(n))}},i}(t.GComponent);t.GLabel=e,egret.registerClass(e,"fairygui.GLabel")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._lineGap=0,this._columnGap=0,this._lastSelectedIndex=0,this._trackBounds=!0,this._pool=new t.GObjectPool,this._layout=0,this._autoResizeItem=!0,this._lastSelectedIndex=-1,this._selectionMode=0}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.dispose=function(){this._pool.clear(),e.prototype.dispose.call(this)},n(p,"layout",function(){return this._layout},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag())}),n(p,"lineGap",function(){return this._lineGap},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag())}),n(p,"columnGap",function(){return this._columnGap},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag())}),n(p,"defaultItem",function(){return this._defaultItem},function(t){this._defaultItem=t}),n(p,"autoResizeItem",function(){return this._autoResizeItem},function(t){this._autoResizeItem=t}),n(p,"selectionMode",function(){return this._selectionMode},function(t){this._selectionMode=t}),p.getFromPool=function(t){return void 0===t&&(t=null),t||(t=this._defaultItem),this._pool.getObject(t)},p.returnToPool=function(t){this._pool.returnObject(t)},p.addChildAt=function(i,n){if(void 0===n&&(n=0),this._autoResizeItem&&(0==this._layout?i.width=this.viewWidth:1==this._layout&&(i.height=this.viewHeight)),e.prototype.addChildAt.call(this,i,n),i instanceof t.GButton){var s=i;s.selected=!1,s.changeStateOnClick=!1}return i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mouseDownItem,this),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),i},p.addItem=function(e){return void 0===e&&(e=null),e||(e=this._defaultItem),this.addChild(t.UIPackage.createObjectFromURL(e))},p.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},p.removeChildAt=function(t,i){void 0===i&&(i=!1);var n=e.prototype.removeChildAt.call(this,t,i);return n.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mouseDownItem,this),n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),n},p.removeChildToPoolAt=function(t){void 0===t&&(t=0);var i=e.prototype.removeChildAt.call(this,t);this.returnToPool(i)},p.removeChildToPool=function(t){e.prototype.removeChild.call(this,t),this.returnToPool(t)},p.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var i=t;e>=i;++i)this.removeChildToPoolAt(t)},n(p,"selectedIndex",function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e].asButton;if(null!=i&&i.selected)return e}return-1},function(t){this.clearSelection(),t>=0&&t<this._children.length&&this.addSelection(t)}),p.getSelection=function(){for(var t=new Array,e=this._children.length,i=0;e>i;i++){var n=this._children[i].asButton;null!=n&&n.selected&&t.push(i)}return t},p.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this._selectionMode){0==this._selectionMode&&this.clearSelection();var i=this.getChildAt(t).asButton;null!=i&&(i.selected||(i.selected=!0),e&&null!=this._scrollPane&&this._scrollPane.scrollToView(i))}},p.removeSelection=function(t){if(void 0===t&&(t=0),3!=this._selectionMode){var e=this.getChildAt(t).asButton;null!=e&&e.selected&&(e.selected=!1)}},p.clearSelection=function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e].asButton;null!=i&&(i.selected=!1)}},p.selectAll=function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e].asButton;null!=i&&(i.selected=!0)}},p.selectNone=function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e].asButton;null!=i&&(i.selected=!1)}},p.selectReverse=function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e].asButton;null!=i&&(i.selected=!i.selected)}},p.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e)switch(t){case 1:if(0==this._layout||3==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout){for(var i=this._children[e],n=0,s=e-1;s>=0;s--){var r=this._children[s];if(r.y!=i.y){i=r;break}n++}for(;s>=0;s--)if(r=this._children[s],r.y!=i.y){this.clearSelection(),this.addSelection(s+n+1,!0);break}}break;case 3:if(1==this._layout||2==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){i=this._children[e],n=0;var a=this._children.length;for(s=e+1;a>s;s++){if(r=this._children[s],r.x!=i.x){i=r;break
}n++}for(;a>s;s++)if(r=this._children[s],r.x!=i.x){this.clearSelection(),this.addSelection(s-n-1,!0);break}}break;case 5:if(0==this._layout||3==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout){for(i=this._children[e],n=0,a=this._children.length,s=e+1;a>s;s++){if(r=this._children[s],r.y!=i.y){i=r;break}n++}for(;a>s;s++)if(r=this._children[s],r.y!=i.y){this.clearSelection(),this.addSelection(s-n-1,!0);break}}break;case 7:if(1==this._layout||2==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){for(i=this._children[e],n=0,s=e-1;s>=0;s--){if(r=this._children[s],r.x!=i.x){i=r;break}n++}for(;s>=0;s--)if(r=this._children[s],r.x!=i.x){this.clearSelection(),this.addSelection(s+n+1,!0);break}}}},p.__mouseDownItem=function(e){var i=e.currentTarget;null!=i&&3!=this._selectionMode&&(this._selectionHandled=!1,t.UIConfig.defaultScrollTouchEffect&&null!=this.scrollPane||(0==this._selectionMode?this.setSelectionOnEvent(i):i.selected||this.setSelectionOnEvent(i)))},p.__clickItem=function(e){if(null==this._scrollPane||!this._scrollPane._isMouseMoved){var i=e.currentTarget;this._selectionHandled||this.setSelectionOnEvent(i),this._selectionHandled=!1,this.scrollPane&&this.scrollPane.scrollToView(i,!0);var n=new t.ItemEvent(t.ItemEvent.CLICK,i);n.stageX=e.stageX,n.stageY=e.stageY,this.dispatchEvent(n)}},p.setSelectionOnEvent=function(e){if(e instanceof t.GButton&&3!=this._selectionMode){this._selectionHandled=!0;var i=!1,n=e,s=this.getChildIndex(e);if(0==this._selectionMode)n.selected||(this.clearSelectionExcept(n),n.selected=!0);else if(t.GRoot.shiftKeyDown){if(!n.selected)if(-1!=this._lastSelectedIndex){var r=Math.min(this._lastSelectedIndex,s),a=Math.max(this._lastSelectedIndex,s);a=Math.min(a,this.numChildren-1);for(var o=r;a>=o;o++){var h=this.getChildAt(o).asButton;null==h||h.selected||(h.selected=!0)}i=!0}else n.selected=!0}else t.GRoot.ctrlKeyDown||2==this._selectionMode?n.selected=!n.selected:n.selected?this.clearSelectionExcept(n):(this.clearSelectionExcept(n),n.selected=!0);i||(this._lastSelectedIndex=s)}},p.clearSelectionExcept=function(t){for(var e=this._children.length,i=0;e>i;i++){var n=this._children[i].asButton;null!=n&&n!=t&&n.selected&&(n.selected=!1)}},p.resizeToFit=function(t,e){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numChildren;if(t>i&&(t=i),0==t)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{for(var n=t-1,s=null;n>=0&&(s=this.getChildAt(n),!s.visible);)n--;if(0>n)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{var r=0;0==this._layout||2==this._layout?(r=s.y+s.height,e>r&&(r=e),this.viewHeight=r):(r=s.x+s.width,e>r&&(r=e),this.viewWidth=r)}}},p.getMaxItemWidth=function(){for(var t=this.numChildren,e=0,i=0;t>i;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},p.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._autoResizeItem&&this.adjustItemsSize(),(2==this._layout||3==this._layout)&&this.setBoundsChangedFlag()},p.adjustItemsSize=function(){if(0==this._layout)for(var t=this.numChildren,e=this.viewWidth,i=0;t>i;i++){var n=this.getChildAt(i);n.width=e}else if(1==this._layout){t=this.numChildren;var s=this.viewHeight;for(i=0;t>i;i++)n=this.getChildAt(i),n.height=s}},p.findObjectNear=function(t,e,i){i||(i=new egret.Point);var n=this._children.length;if(0==n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var s=null,r=0;if(0!=e){for(;n>r;r++)if(s=this._children[r],e<s.y){if(0==r){e=0;break}var a=this._children[r-1];e=e<a.y+a.actualHeight/2?a.y:e<a.y+a.actualHeight?s.y:s.y+this._lineGap/2;break}r==n&&(e=s.y)}if(0!=t){for(r>0&&r--;n>r;r++)if(s=this._children[r],t<s.x){if(0==r){t=0;break}a=this._children[r-1],t=t<a.x+a.actualWidth/2?a.x:t<a.x+a.actualWidth?s.x:s.x+this._columnGap/2;break}r==n&&(t=s.x)}return i.x=t,i.y=e,i},p.updateBounds=function(){var t,e,i=this.numChildren,n=0,s=0,r=0,a=0,o=0,h=0;for(n=0;i>n;n++)t=this.getChildAt(n),t.ensureSizeCorrect();if(0==this._layout){for(n=0;i>n;n++)t=this.getChildAt(n),t.visible&&(0!=r&&(r+=this._lineGap),t.setXY(s,r),r+=t.height,t.width>a&&(a=t.width));e=s+a,h=r}else if(1==this._layout){for(n=0;i>n;n++)t=this.getChildAt(n),t.visible&&(0!=s&&(s+=this._columnGap),t.setXY(s,r),s+=t.width,t.height>o&&(o=t.height));e=s,h=r+o}else if(2==this._layout){for(e=this.viewWidth,n=0;i>n;n++)t=this.getChildAt(n),t.visible&&(0!=s&&(s+=this._columnGap),s+t.width>e&&0!=o&&(s=0,r+=o+this._lineGap,o=0),t.setXY(s,r),s+=t.width,t.height>o&&(o=t.height));h=r+o}else{for(h=this.viewHeight,n=0;i>n;n++)t=this.getChildAt(n),t.visible&&(0!=r&&(r+=this._lineGap),r+t.height>h&&0!=a&&(r=0,s+=a+this._columnGap,a=0),t.setXY(s,r),r+=t.height,t.width>a&&(a=t.width));e=s+a}this.setBounds(0,0,e,h)},p.setup_beforeAdd=function(i){e.prototype.setup_beforeAdd.call(this,i);var n;n=i.attributes.layout,n&&(this._layout=t.parseListLayoutType(n));var s;n=i.attributes.overflow,s=n?t.parseOverflowType(n):0;var r;n=i.attributes.scroll,r=n?t.parseScrollType(n):1;var a;n=i.attributes.scrollBar,a=n?t.parseScrollBarDisplayType(n):0;var o;n=i.attributes.scrollBarFlags,o=n?parseInt(n):0;var h;2==s&&(h=new t.Margin,n=i.attributes.scrollBarMargin,n&&h.parse(n)),n=i.attributes.margin,n&&this._margin.parse(n),this.setupOverflowAndScroll(s,h,r,a,o),n=i.attributes.lineGap,this._lineGap=n?parseInt(n):0,n=i.attributes.colGap,this._columnGap=n?parseInt(n):0,n=i.attributes.defaultItem,n&&(this._defaultItem=n),n=i.attributes.autoItemSize,this._autoResizeItem="false"!=n;var l=i.children;if(l)for(var c=l.length,_=0;c>_;_++){var u=l[_],d=u.attributes.url;if(d||(d=this._defaultItem),d){var p=this.addChild(this.getFromPool(d));p instanceof t.GButton?(p.title=u.attributes.title,p.icon=u.attributes.icon):p instanceof t.GLabel&&(p.title=u.attributes.title,p.icon=u.attributes.icon)}}},i}(t.GComponent);t.GList=e,egret.registerClass(e,"fairygui.GList")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._count=0,this._pool={}}var i=__define,n=e;return p=n.prototype,p.clear=function(){for(var t=this._pool.length,e=0;t>e;e++)for(var i=this._pool[e],n=i.length,s=0;n>s;s++)i[s].dispose();this._pool={},this._count=0},i(p,"count",function(){return this._count}),p.getObject=function(e){var i=this._pool[e];if(null==i&&(i=new Array,this._pool[e]=i),i.length)return this._count--,i.pop();var n=t.UIPackage.createObjectFromURL(e);if(!n)throw e+" not exists";return n},p.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];i&&(this._count++,i.push(t))}},e}();t.GObjectPool=e,egret.registerClass(e,"fairygui.GObjectPool")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._frame=0,this._color=0,this._contentSourceWidth=0,this._contentSourceHeight=0,this._contentWidth=0,this._contentHeight=0,this._playing=!0,this._url="",this._align=0,this._verticalAlign=0,this._showErrorSign=!0,this._color=16777215,this._gearAnimation=new t.GearAnimation(this),this._gearColor=new t.GearColor(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.createDisplayObject=function(){this._container=new t.UIContainer(this),this._container.scaleX=t.GRoot.contentScaleFactor,this._container.scaleY=t.GRoot.contentScaleFactor,this.setDisplayObject(this._container)},p.dispose=function(){null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture),e.prototype.dispose.call(this)},n(p,"url",function(){return this._url},function(t){this._url!=t&&(this._url=t,this.loadContent())}),n(p,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.updateLayout())}),n(p,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateLayout())}),n(p,"fill",function(){return this._fill},function(t){this._fill!=t&&(this._fill=t,this.updateLayout())}),n(p,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())}),n(p,"playing",function(){return this._playing},function(e){this._playing!=e&&(this._playing=e,this._content instanceof t.MovieClip&&(this._content.playing=e),null!=this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"frame",function(){return this._frame},function(e){this._frame!=e&&(this._frame=e,this._content instanceof t.MovieClip&&(this._content.currentFrame=e),null!=this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,null!=this._gearColor.controller&&this._gearColor.updateState(),this.applyColor())}),p.applyColor=function(){},n(p,"showErrorSign",function(){return this._showErrorSign},function(t){this._showErrorSign=t}),n(p,"content",function(){return this._content}),p.loadContent=function(){this.clearContent(),this._url&&(t.ToolSet.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},p.loadFromPackage=function(e){this._contentItem=t.UIPackage.getItemByURL(e),null!=this._contentItem?(this._contentItem.load(),0==this._contentItem.type?null==this._contentItem.texture?this.setErrorState():(this._content instanceof egret.Bitmap?this._container.addChild(this._content):(this._content=new egret.Bitmap,this._container.addChild(this._content)),this._content.texture=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._content.fillMode=this._contentItem.scaleByTile?egret.BitmapFillMode.REPEAT:egret.BitmapFillMode.SCALE,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):2==this._contentItem.type?(this._content instanceof t.MovieClip?this._container.addChild(this._content):(this._content=new t.MovieClip,this._container.addChild(this._content)),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.frames=this._contentItem.frames,this._content.boundsRect=new egret.Rectangle(0,0,this._contentSourceWidth,this._contentSourceHeight),this.updateLayout()):this.setErrorState()):this.setErrorState()},p.loadExternal=function(){RES.getResAsync(this._url,this.__getResCompleted,this)},p.freeExternal=function(){},p.onExternalLoadSuccess=function(t){this._content instanceof egret.Bitmap?this._container.addChild(this._content):(this._content=new egret.Bitmap,this._container.addChild(this._content)),this._content.texture=t,this._content.scale9Grid=null,this._content.fillMode=egret.BitmapFillMode.SCALE,this._contentSourceWidth=t.textureWidth,this._contentSourceHeight=t.textureHeight,this.updateLayout()},p.onExternalLoadFailed=function(){this.setErrorState()},p.__getResCompleted=function(t){t instanceof egret.Texture?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},p.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=t.UIConfig.loaderErrorSign&&(this._errorSign=i._errorSignPool.getObject(t.UIConfig.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.width=this.width,this._errorSign.height=this.height,this._container.addChild(this._errorSign.displayObject)))},p.clearErrorState=function(){null!=this._errorSign&&(this._container.removeChild(this._errorSign.displayObject),i._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},p.updateLayout=function(){if(null==this._content)return void(this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1));if(this._content.x=0,this._content.y=0,this._content.scaleX=1,this._content.scaleY=1,this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize)this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1;else{var t=1,e=1;(1==this._fill||2==this._fill)&&(t=this.width/this._contentSourceWidth,e=this.height/this._contentSourceHeight,(1!=t||1!=e)&&(1==this._fill&&(t>e?t=e:e=t),this._contentWidth=this._contentSourceWidth*t,this._contentHeight=this._contentSourceHeight*e)),this._content instanceof egret.Bitmap?(this._content.width=this._contentWidth,this._content.height=this._contentHeight):(this._content.scaleX=t,this._content.scaleY=e),1==this._align?this._content.x=Math.floor((this.width-this._contentWidth)/2):2==this._align&&(this._content.x=this.width-this._contentWidth),1==this._verticalAlign?this._content.y=Math.floor((this.height-this._contentHeight)/2):2==this._verticalAlign&&(this._content.y=this.height-this._contentHeight)}},p.clearContent=function(){this.clearErrorState(),null!=this._content&&null!=this._content.parent&&this._container.removeChild(this._content),null==this._contentItem&&null!=this._content&&this.freeExternal(this._content.texture),this._contentItem=null},n(p,"gearAnimation",function(){return this._gearAnimation}),n(p,"gearColor",function(){return this._gearColor}),p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._gearAnimation.controller==t&&this._gearAnimation.apply(),this._gearColor.controller==t&&this._gearColor.apply()},p.handleSizeChanged=function(){this._updatingLayout||this.updateLayout(),this._container.scaleX=this.scaleX*t.GRoot.contentScaleFactor,this._container.scaleY=this.scaleY*t.GRoot.contentScaleFactor},p.setup_beforeAdd=function(i){e.prototype.setup_beforeAdd.call(this,i);var n;n=i.attributes.url,n&&(this._url=n),n=i.attributes.align,n&&(this._align=t.parseAlignType(n)),n=i.attributes.vAlign,n&&(this._verticalAlign=t.parseVertAlignType(n)),n=i.attributes.fill,n&&(this._fill=t.parseFillType(n)),this._autoSize="true"==i.attributes.autoSize,n=i.attributes.errorSign,n&&(this._showErrorSign="true"==n),this._playing="false"!=i.attributes.playing,n=i.attributes.color,n&&(this.color=t.ToolSet.convertFromHtmlColor(n)),this._url&&this.loadContent()},p.setup_afterAdd=function(t){e.prototype.setup_afterAdd.call(this,t);var i=t.children;if(i)for(var n=i.length,s=0;n>s;s++){var r=i[s];if("gearAni"==r.name){this._gearAnimation.setup(r);break}if("gearColor"==r.name){this._gearColor.setup(r);break}}},i._errorSignPool=new t.GObjectPool,i}(t.GObject);t.GLoader=e,egret.registerClass(e,"fairygui.GLoader",["fairygui.IAnimationGear","fairygui.IColorGear"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._gearAnimation=new t.GearAnimation(this),this._gearColor=new t.GearColor(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"color",function(){return 0},function(){}),p.createDisplayObject=function(){this._movieClip=new t.UIMovieClip(this),this.setDisplayObject(this._movieClip)},n(p,"playing",function(){return this._movieClip.playing},function(t){this._movieClip.playing!=t&&(this._movieClip.playing=t,this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"frame",function(){return this._movieClip.currentFrame},function(t){this._movieClip.currentFrame!=t&&(this._movieClip.currentFrame=t,this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"gearAnimation",function(){return this._gearAnimation}),n(p,"gearColor",function(){return this._gearColor}),p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._gearAnimation.controller==t&&this._gearAnimation.apply(),this._gearColor.controller==t&&this._gearColor.apply()},p.handleSizeChanged=function(){this.displayObject.scaleX=this.width/this._sourceWidth*this.scaleX*t.GRoot.contentScaleFactor,this.displayObject.scaleY=this.height/this._sourceHeight*this.scaleY*t.GRoot.contentScaleFactor},p.constructFromResource=function(t){this._packageItem=t,this._sourceWidth=this._packageItem.width,this._sourceHeight=this._packageItem.height,this._initWidth=this._sourceWidth,this._initHeight=this._sourceHeight,this.setSize(this._sourceWidth,this._sourceHeight),t.load(),this._movieClip.interval=this._packageItem.interval,this._movieClip.frames=this._packageItem.frames,this._movieClip.boundsRect=new egret.Rectangle(0,0,this.sourceWidth,this.sourceHeight)},p.setup_beforeAdd=function(i){e.prototype.setup_beforeAdd.call(this,i);var n;n=i.attributes.frame,n&&(this._movieClip.currentFrame=parseInt(n)),n=i.attributes.playing,this._movieClip.playing="false"!=n,n=i.attributes.color,n&&(this.color=t.ToolSet.convertFromHtmlColor(n))},p.setup_afterAdd=function(t){e.prototype.setup_afterAdd.call(this,t);var i=t.children;if(i)for(var n=i.length,s=0;n>s;s++){var r=i[s];if("gearAni"==r.name){this._gearAnimation.setup(r);break}if("gearColor"==r.name){this._gearColor.setup(r);break}}},i}(t.GObject);t.GMovieClip=e,egret.registerClass(e,"fairygui.GMovieClip",["fairygui.IAnimationGear","fairygui.IColorGear"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._max=0,this._value=0,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._barStartX=0,this._barStartY=0,this._titleType=0,this._value=50,this._max=100}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"titleType",function(){return this._titleType},function(t){this._titleType=t}),n(p,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update())}),n(p,"value",function(){return this._value},function(t){this._value!=t&&(this._value=t,this.update())}),p.update=function(){var e=Math.min(this._value/this._max,1);if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*e)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max}var i=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=i*e,this._barObjectH.x=this._barStartX+(i-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=n*e,this._barObjectV.y=this._barStartY+(n-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=i*e),this._barObjectV&&(this._barObjectV.height=n*e)),this._aniObject instanceof t.GMovieClip?this._aniObject.frame=Math.round(100*e):this._aniObject instanceof t.GSwfObject&&(this._aniObject.frame=Math.round(100*e))},p.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.ToolSet.findChildNode(i,"ProgressBar");var n;n=i.attributes.titleType,n&&(this._titleType=t.parseProgressTitleType(n)),this._reverse="true"==i.attributes.reverse,this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},p.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},p.setup_afterAdd=function(i){e.prototype.setup_afterAdd.call(this,i),i=t.ToolSet.findChildNode(i,"ProgressBar"),i&&(this._value=parseInt(i.attributes.value),this._max=parseInt(i.attributes.max)),this.update()},i}(t.GComponent);t.GProgressBar=e,egret.registerClass(e,"fairygui.GProgressBar")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function n(){e.call(this),this._fontSize=0,this._leading=0,this._letterSpacing=0,this._yOffset=0,this._textWidth=0,this._textHeight=0,this._fontSize=12,this._align=0,this._verticalAlign=0,this._text="",this._leading=3,this._color=0,this._autoSize=1,this._widthAutoSize=!0,this._heightAutoSize=!0,this._gearColor=new t.GearColor(this),this._bitmapPool=new Array}__extends(n,e);var s=__define,r=n;return p=r.prototype,p.createDisplayObject=function(){var e=new t.UITextField(this);this._textField=e.getChildAt(0),this.setDisplayObject(e)},p.dispose=function(){e.prototype.dispose.call(this),this._bitmapFont=null},s(p,"text",function(){return this._text},function(e){this._text=e,null==this._text&&(this._text=""),this._textField.width=Math.ceil(this.width*t.GRoot.contentScaleFactor),this._ubbEnabled?this._textField.textFlow=(new egret.HtmlTextParser).parser(t.ToolSet.parseUBB(t.ToolSet.encodeHTML(this._text))):this._textField.text=this._text,this.parent&&this.parent._underConstruct?this.renderNow():this.render()}),s(p,"font",function(){return this._font},function(t){this._font!=t&&(this._font=t,this.updateTextFormat())}),s(p,"fontSize",function(){return this._fontSize},function(t){0>t||this._fontSize!=t&&(this._fontSize=t,this.updateTextFormat())}),s(p,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this._gearColor.controller&&this._gearColor.updateState(),this.updateTextFormat())}),s(p,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.updateTextFormat())}),s(p,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.doAlign())}),s(p,"leading",function(){return this._leading},function(t){this._leading!=t&&(this._leading=t,this.updateTextFormat())}),s(p,"letterSpacing",function(){return this._letterSpacing},function(t){this._letterSpacing!=t&&(this._letterSpacing=t,this.updateTextFormat())}),s(p,"underline",function(){return!1},function(){}),s(p,"bold",function(){return this._textField.bold},function(t){this._textField.bold=t}),s(p,"italic",function(){return this._textField.italic},function(t){this._textField.italic=t}),s(p,"singleLine",function(){return!this._textField.multiline},function(t){t=!t,this._textField.multiline!=t&&(this._textField.multiline=t,this.render())}),s(p,"stroke",function(){return 0!=this._textField.stroke},function(t){this._textField.stroke=t?2:0}),s(p,"strokeColor",function(){return this._textField.strokeColor},function(t){this._textField.strokeColor=t}),s(p,"ubbEnabled",function(){return this._ubbEnabled},function(t){this._ubbEnabled!=t&&(this._ubbEnabled=t,this.render())}),s(p,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&(this._autoSize=t,this._widthAutoSize=1==t,this._heightAutoSize=1==t||2==t,this.render())}),s(p,"displayAsPassword",function(){return this._textField.displayAsPassword},function(t){this._textField.displayAsPassword!=t&&(this._textField.displayAsPassword=t,this.render())}),s(p,"textWidth",function(){return this.ensureSizeCorrect(),Math.ceil(this._textWidth/t.GRoot.contentScaleFactor)}),p.ensureSizeCorrect=function(){this._sizeDirty&&this._requireRender&&this.renderNow()},s(p,"gearColor",function(){return this._gearColor}),p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._gearColor.controller==t&&this._gearColor.apply()},p.updateTextFormat=function(){this._textField.size=1==t.GRoot.contentScaleFactor?this._fontSize:Math.floor(this._fontSize*t.GRoot.contentScaleFactor)-1,t.ToolSet.startsWith(this._font,"ui://")?this._bitmapFont=t.UIPackage.getBitmapFontByURL(this._font):(this._bitmapFont=null,this._textField.fontFamily=this._font?this._font:t.UIConfig.defaultFont),this._textField.textColor=this.grayed?11184810:this._color,this._textField.textAlign=t.getAlignTypeString(this._align),this._textField.lineSpacing=Math.floor(this._leading*t.GRoot.contentScaleFactor),this._underConstruct||this.render()},p.render=function(){this._requireRender=!0,(this._widthAutoSize||this._heightAutoSize)&&(this._sizeDirty=!0,this.dispatchEventWith(t.GObject.SIZE_DELAY_CHANGE)),egret.callLater(this.__render,this)},p.__render=function(){this._requireRender&&this.renderNow()},p.renderNow=function(e){if(void 0===e&&(e=!0),this._requireRender=!1,this._sizeDirty=!1,null!=this._bitmapFont)return void this.renderWithBitmapFont(e);null==this._textField.parent&&(this.displayObject.removeChildren(),this.displayObject.addChild(this._textField)),this._textField.width,this._textWidth=Math.ceil(this._textField.textWidth),this._textWidth>0&&(this._textWidth+=4),this._textHeight=Math.ceil(this._textField.textHeight),this._textHeight>0&&(this._textHeight+=4);var i,n=0;i=this._widthAutoSize?Math.ceil(this._textWidth/t.GRoot.contentScaleFactor):this.width,this._heightAutoSize?(n=Math.ceil(this._textHeight/t.GRoot.contentScaleFactor),this._widthAutoSize||(this._textField.height=this._textHeight)):(n=this.height,this._textHeight>n*t.GRoot.contentScaleFactor&&(this._textHeight=Math.ceil(n*t.GRoot.contentScaleFactor)),this._textField.height=this._textHeight),e&&(this._updatingSize=!0,this.setSize(i,n),this._updatingSize=!1,this.doAlign())},p.renderWithBitmapFont=function(e){for(var s=this.displayObject,r=s.numChildren,a=0;r>a;a++){var o=s.getChildAt(a);o instanceof egret.Bitmap&&this._bitmapPool.push(o)}s.removeChildren(),this._lines?i.returnList(this._lines):this._lines=new Array;for(var h,l=this._letterSpacing*t.GRoot.contentScaleFactor,c=this._leading*t.GRoot.contentScaleFactor-1,_=this._textField.size,u=(this.width-2*n.GUTTER_X)*t.GRoot.contentScaleFactor,d=0,p=0,g=0,f=0,v=0,m=0,y=0,b=0,w=0,C="",S=n.GUTTER_Y,x=0,I=0,O=!this._widthAutoSize&&this._textField.multiline,T=this._text.length,E=0;T>E;++E){var k=this._text.charAt(E),P=k.charCodeAt(E);if("\n"!=k){if(P>256||32>=P?(m>0&&(b=d),m=0):(0==m&&(y=d),m++)," "==k)f=_/2,v=_;else{var G=this._bitmapFont.glyphs[k];G?(f=Math.ceil(G.advance*t.GRoot.contentScaleFactor),v=Math.ceil(G.lineHeight*t.GRoot.contentScaleFactor)):" "==k?(f=Math.ceil(this._bitmapFont.lineHeight*t.GRoot.contentScaleFactor/2),v=Math.ceil(this._bitmapFont.lineHeight*t.GRoot.contentScaleFactor)):(f=0,v=0)}if(v>g&&(g=v),v>p&&(p=v),0!=d&&(d+=l),d+=f,!O||u>=d)C+=k;else{if(h=i.borrow(),h.height=p,h.textHeight=g,0==C.length)h.text=k;else if(m>0&&b>0){C+=k;var F=C.length-m;h.text=t.ToolSet.trimRight(C.substr(0,F)),h.width=b,C=C.substr(F+1),d-=y}else h.text=C,h.width=d-(f+l),C=k,d=f,p=v,g=v;h.y=S,S+=h.height+c,h.width>x&&(x=h.width),m=0,y=0,b=0,this._lines.push(h)}}else C+=k,h=i.borrow(),h.width=d,0==g&&(0==w&&(w=_),0==p&&(p=w),g=p),h.height=p,w=p,h.textHeight=g,h.text=C,h.y=S,S+=h.height+c,h.width>x&&(x=h.width),this._lines.push(h),C="",d=0,p=0,g=0,m=0,y=0,b=0}(C.length>0||this._lines.length>0&&t.ToolSet.endsWith(this._lines[this._lines.length-1].text,"\n"))&&(h=i.borrow(),h.width=d,0==p&&(p=w),0==g&&(g=p),h.height=p,h.textHeight=g,h.text=C,h.y=S,h.width>x&&(x=h.width),this._lines.push(h)),x>0&&(x+=2*n.GUTTER_X);var A=this._lines.length;0==A?I=0:(h=this._lines[this._lines.length-1],I=h.y+h.height+n.GUTTER_Y);var H,j=0;if(H=this._widthAutoSize?0==x?0:x:this.width*t.GRoot.contentScaleFactor,j=this._heightAutoSize?0==I?0:I:this.height*t.GRoot.contentScaleFactor,e&&(this._updatingSize=!0,this.setSize(H/t.GRoot.contentScaleFactor,j/t.GRoot.contentScaleFactor),this._updatingSize=!1,this.doAlign()),0!=H&&0!=j)for(var B=n.GUTTER_X,R=0,L=0,M=this._lines.length,a=0;M>a;a++){h=this._lines[a],B=n.GUTTER_X,R=1==this._align?(u-h.width)/2:2==this._align?u-h.width:0,T=h.text.length;for(var W=0;T>W;W++)if(k=h.text.charAt(W),G=this._bitmapFont.glyphs[k],null!=G){L=(h.height+h.textHeight)/2-G.lineHeight;var D=this._bitmapPool.length?this._bitmapPool.pop():new egret.Bitmap;D.x=B+R+G.offsetX,D.y=h.y+L+G.offsetY,D.texture=G.texture,D.scaleX=t.GRoot.contentScaleFactor,D.scaleY=t.GRoot.contentScaleFactor,s.addChild(D),B+=l+Math.ceil(G.advance*t.GRoot.contentScaleFactor)}else B+=" "==k?l+Math.ceil(this._bitmapFont.lineHeight*t.GRoot.contentScaleFactor/2):l}},p.handleXYChanged=function(){this.displayObject.x=this.x*t.GRoot.contentScaleFactor,this.displayObject.y=this.y*t.GRoot.contentScaleFactor+this._yOffset},p.handleSizeChanged=function(){this._updatingSize||(this._widthAutoSize?this.doAlign():this._textField.width=Math.ceil(this.width*t.GRoot.contentScaleFactor))},p.handleGrayChanged=function(){e.prototype.handleGrayChanged.call(this),this.updateTextFormat()},p.doAlign=function(){if(0==this._verticalAlign||0==this._textHeight)this._yOffset=n.GUTTER_Y;else{var e=this.height*t.GRoot.contentScaleFactor-this._textHeight;0>e&&(e=0),this._yOffset=Math.floor(1==this._verticalAlign?e/2:e)}this.displayObject.y=this.y*t.GRoot.contentScaleFactor+this._yOffset},p.setup_beforeAdd=function(i){e.prototype.setup_beforeAdd.call(this,i);var n;this._textField.displayAsPassword="true"==i.attributes.password,n=i.attributes.font,n&&(this._font=n),n=i.attributes.fontSize,n&&(this._fontSize=parseInt(n)),n=i.attributes.color,n&&(this._color=t.ToolSet.convertFromHtmlColor(n)),n=i.attributes.align,n&&(this._align=t.parseAlignType(n)),n=i.attributes.vAlign,n&&(this._verticalAlign=t.parseVertAlignType(n)),n=i.attributes.leading,this._leading=n?parseInt(n):3,n=i.attributes.letterSpacing,n&&(this._letterSpacing=parseInt(n)),this._ubbEnabled="true"==i.attributes.ubb,n=i.attributes.autoSize,n&&(this._autoSize=t.parseAutoSizeType(n),this._widthAutoSize=1==this._autoSize,this._heightAutoSize=1==this._autoSize||2==this._autoSize),this._textField.italic="true"==i.attributes.italic,this._textField.bold="true"==i.attributes.bold,this._textField.multiline="true"!=i.attributes.singleLine,n=i.attributes.strokeColor,n&&(this._textField.strokeColor=t.ToolSet.convertFromHtmlColor(n),this.stroke=!0)},p.setup_afterAdd=function(t){e.prototype.setup_afterAdd.call(this,t),this.updateTextFormat();var i=t.attributes.text;null!=i&&i.length>0&&(this.text=i),this._sizeDirty=!1;var n=t.children;if(n)for(var s=n.length,r=0;s>r;r++){var a=n[r];if("gearColor"==a.name){this._gearColor.setup(a);break}}},n.GUTTER_X=2,n.GUTTER_Y=2,n}(t.GObject);t.GTextField=e,egret.registerClass(e,"fairygui.GTextField",["fairygui.IColorGear"]);var i=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.y=0}var e=(__define,t);return p=e.prototype,t.borrow=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.returns=function(e){t.pool.push(e)},t.returnList=function(e){for(var i=e.length,n=0;i>n;n++){var s=e[n];t.pool.push(s)}e.length=0},t.pool=[],t}();t.LineInfo=i,egret.registerClass(i,"fairygui.LineInfo")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._textField.touchEnabled=!0,this._textField.addEventListener(egret.TextEvent.LINK,this.__clickLink,this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"text",void 0,function(e){this._text=e,null==this._text&&(this._text=""),this._textField.width=this.width*t.GRoot.contentScaleFactor,this._textField.textFlow=(new egret.HtmlTextParser).parser(this._ubbEnabled?t.ToolSet.parseUBB(this._text):this._text),this.render()}),p.__clickLink=function(t){this.dispatchEvent(new egret.TextEvent(egret.TextEvent.LINK,!1,!1,t.text))},i}(t.GTextField);t.GRichTextField=e,egret.registerClass(e,"fairygui.GRichTextField")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),null==i._inst&&(i._inst=this),this.opaque=!1,this._volumeScale=1,this._popupStack=new Array,this._justClosedPopups=new Array,this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(i,"inst",function(){return null==i._inst&&new i,i._inst}),n(p,"nativeStage",function(){return this._nativeStage}),p.setContentScaleFactor=function(t,e){var n,s=0;if(n=this._nativeStage.stageWidth,s=this._nativeStage.stageHeight,t>0&&e>0){var r=n/t,a=s/e;i.contentScaleFactor=Math.min(r,a)}else i.contentScaleFactor=t>0?n/t:e>0?s/e:1;this.setSize(Math.round(n/i.contentScaleFactor),Math.round(s/i.contentScaleFactor))},p.enableFocusManagement=function(){this._focusManagement=!0
},p.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},p.hideWindow=function(t){t.hide()},p.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},p.showModalWait=function(e){void 0===e&&(e=null),null!=t.UIConfig.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,24),this.addChild(this._modalWaitPane),this._modalWaitPane.text=e)},p.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},p.closeAllExceptModals=function(){for(var e=this._children.slice(),i=e.length,n=0;i>n;n++){var s=e[n];s instanceof t.Window&&!s.modal&&s.hide()}},p.closeAllWindows=function(){for(var e=this._children.slice(),i=e.length,n=0;i>n;n++){var s=e[n];s instanceof t.Window&&s.hide()}},p.getTopWindow=function(){for(var e=this.numChildren,i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window)return n}return null},n(p,"hasModalWindow",function(){return null!=this._modalLayer.parent}),n(p,"modalWaiting",function(){return this._modalWaitPane&&this._modalWaitPane.inContainer}),p.showPopup=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),this._popupStack.length>0){var s=this._popupStack.indexOf(t);if(-1!=s)for(var r=this._popupStack.length-1;r>=s;r--)this.removeChild(this._popupStack.pop())}this._popupStack.push(t),this.addChild(t),this.adjustModalLayer();var a,o,h=0;e?(a=e.localToGlobal(),o=e.width,h=e.height):a=new egret.Point(i.mouseX/i.contentScaleFactor,i.mouseY/i.contentScaleFactor);var l,c;l=a.x,l+t.width>this.width&&(l=l+o-t.width),c=a.y+h,(null==n&&c+t.height>this.height||0==n)&&(c=a.y-t.height-1,0>c&&(c=0,l+=o/2)),t.x=l,t.y=c},p.togglePopup=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},p.hidePopup=function(t){if(void 0===t&&(t=null),null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var i=this._popupStack.length-1;i>=e;i--)this.closePopup(this._popupStack.pop())}else{var n=this._popupStack.length;for(i=n-1;i>=0;i--)this.closePopup(this._popupStack[i]);this._popupStack.length=0}},n(p,"hasAnyPopup",function(){return 0!=this._popupStack.length}),p.closePopup=function(e){null!=e.parent&&(e instanceof t.Window?e.hide():this.removeChild(e))},p.showTooltips=function(e){if(null==this._defaultTooltipWin){var i=t.UIConfig.tooltipsWin;if(!i)return void console.error("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=t.UIPackage.createObjectFromURL(i)}this._defaultTooltipWin.text=e,this.showTooltipsWin(this._defaultTooltipWin)},p.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this._tooltipWin=t;var n=0,s=0;null==e?(n=(i.mouseX+10)/i.contentScaleFactor,s=(i.mouseY+20)/i.contentScaleFactor):(n=e.x,s=e.y),n+this._tooltipWin.width>this.width&&(n=n-this._tooltipWin.width-1,0>n&&(n=10)),s+this._tooltipWin.height>this.height&&(s=s-this._tooltipWin.height-1,n-this._tooltipWin.width-1>0&&(n=n-this._tooltipWin.width-1),0>s&&(s=10)),this._tooltipWin.x=n,this._tooltipWin.y=s,this.addChild(this._tooltipWin)},p.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)},p.getObjectUnderPoint=function(e,i){var n=this._nativeStage.$hitTest(e,i);return n?t.ToolSet.displayObjectToGObject(n):null},n(p,"focus",function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},function(e){if(this._focusManagement){if(e&&(!e.focusable||!e.onStage))throw"invalid focus target";if(this._focusedObject!=e){var i;null!=this._focusedObject&&this._focusedObject.onStage&&(i=this._focusedObject),this._focusedObject=e,this.dispatchEvent(new t.FocusChangeEvent(t.FocusChangeEvent.CHANGED,i,e))}}}),n(p,"volumeScale",function(){return this._volumeScale},function(t){this._volumeScale=t}),p.playOneShotSound=function(t,e){void 0===e&&(e=1);var i=this._volumeScale*e,n=t.play(0,1);n.volume=i},p.adjustModalLayer=function(){var e=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,e-1);for(var i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n!=this._modalLayer&&n instanceof t.Window&&n.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,i):i>0?this.setChildIndex(this._modalLayer,i-1):this.addChildAt(this._modalLayer,0))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},p.__addedToStage=function(){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._nativeStage=this.displayObject.stage,i.touchScreen=egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE,this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__stageMouseDownCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__stageMouseUpCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__stageMouseMoveCapture,this,!0),this._modalLayer=new t.GGraph,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,0,0,t.UIConfig.modalLayerColor,t.UIConfig.modalLayerAlpha),this._modalLayer.addRelation(this,24),this.displayObject.stage.addEventListener(egret.Event.RESIZE,this.__winResize,this),this.__winResize(null)},p.__stageMouseDownCapture=function(e){if(i.mouseX=e.stageX,i.mouseY=e.stageY,i.touchDown=!0,this._focusManagement)for(var n=e.target;n!=this.displayObject.stage&&null!=n;){if(t.ToolSet.isUIObject(n)){var s=n.owner;if(s.touchable&&s.focusable){this.focus=s;break}}n=n.parent}if(null!=this._tooltipWin&&this.hideTooltips(),this._justClosedPopups.length=0,this._popupStack.length>0){for(n=e.target;n!=this.displayObject.stage&&null!=n;){if(t.ToolSet.isUIObject(n)){var r=this._popupStack.indexOf(n.owner);if(-1!=r){for(var a=this._popupStack.length-1;a>r;a--){var o=this._popupStack.pop();this.closePopup(o),this._justClosedPopups.push(o)}return}}n=n.parent}var h=this._popupStack.length;for(a=h-1;a>=0;a--)o=this._popupStack[a],this.closePopup(o),this._justClosedPopups.push(o);this._popupStack.length=0}},p.__stageMouseMoveCapture=function(t){i.mouseX=t.stageX,i.mouseY=t.stageY},p.__stageMouseUpCapture=function(){i.touchDown=!1},p.__winResize=function(){var t,e=0;t=this._nativeStage.stageWidth,e=this._nativeStage.stageHeight,this.setSize(Math.round(t/i.contentScaleFactor),Math.round(e/i.contentScaleFactor))},i.contentScaleFactor=1,i}(t.GComponent);t.GRoot=e,egret.registerClass(e,"fairygui.GRoot")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}var e=(__define,t);return p=e.prototype,p.parse=function(t){if(!t)return this.left=0,this.right=0,this.top=0,void(this.bottom=0);var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.top=i,this.bottom=i,this.left=i,this.right=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])},p.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e,egret.registerClass(e,"fairygui.Margin")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this._enumI=0,this._enumCount=0,this._items=new Array,this._itemPool=new Array,egret.Ticker.getInstance().register(this.__timer,this)}var e=(__define,t);return p=e.prototype,p.getItem=function(){return this._itemPool.length?this._itemPool.pop():new i},p.findItem=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];if(s.callback==t&&s.thisObj==e)return s}return null},p.add=function(t,e,i,n,s){void 0===s&&(s=null);var r=this.findItem(i,n);r||(r=this.getItem(),r.callback=i,r.hasParam=1==i.length,r.thisObj=n,this._items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=s,r.end=!1},p.callLater=function(t,e,i){void 0===i&&(i=null),this.add(1,1,t,e,i)},p.callDelay=function(t,e,i,n){void 0===n&&(n=null),this.add(t,1,e,i,n)},p.callBy24Fps=function(e,i,n){void 0===n&&(n=null),this.add(t.FPS24,0,e,i,n)},p.exists=function(t,e){var i=this.findItem(t,e);return null!=i},p.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this._items.indexOf(i);this._items.splice(n,1),n<this._enumI&&this._enumI--,this._enumCount--,i.callback=null,i.param=null,this._itemPool.push(i)}},p.__timer=function(t){for(this._enumI=0,this._enumCount=this._items.length;this._enumI<this._enumCount;){var e=this._items[this._enumI];this._enumI++,e.advance(t)&&(e.end&&(this._enumI--,this._enumCount--,this._items.splice(this._enumI,1),this._itemPool.push(e)),e.hasParam?e.callback.call(e.thisObj,e.param):e.callback.call(e.thisObj))}},t.inst=new t,t.FPS24=1e3/24,t}();t.GTimers=e,egret.registerClass(e,"fairygui.GTimers");var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}var e=(__define,t);return p=e.prototype,p.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay?(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),this.repeat>0&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0):!1},t}();egret.registerClass(i,"TimerItem")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this.sHelperPoint=new egret.Point,this._dragOffset=new egret.Point,this._scrollPerc=0}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.setScrollPane=function(t,e){this._target=t,this._vertical=e},n(p,"displayPerc",void 0,function(t){this._vertical?(this._grip.height=t*this._bar.height,this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._grip.width=t*this._bar.width,this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)}),n(p,"scrollPerc",void 0,function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc}),n(p,"minSize",function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)}),p.constructFromXML=function(t){return e.prototype.constructFromXML.call(this,t),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this),this._grip.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripDragging,this),this._arrowButton1&&this._arrowButton1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton1Click,this),this._arrowButton2&&this._arrowButton2.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton2Click,this),void this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__barMouseDown,this)):void console.error("需要定义bar")):void console.error("需要定义grip")},p.__gripMouseDown=function(e){this._bar&&(e.stopPropagation(),this._dragOffset.x=e.stageX/t.GRoot.contentScaleFactor-this._grip.x,this._dragOffset.y=e.stageY/t.GRoot.contentScaleFactor-this._grip.y)},p.__gripDragging=function(e){if(this._vertical){var i=e.stageY/t.GRoot.contentScaleFactor-this._dragOffset.y;this._target.setPercY((i-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var n=e.stageX/t.GRoot.contentScaleFactor-this._dragOffset.x;this._target.setPercX((n-this._bar.x)/(this._bar.width-this._grip.width),!1)}},p.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},p.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},p.__barMouseDown=function(t){this._grip.displayObject.globalToLocal(t.stageX,t.stageY,this.sHelperPoint),this._vertical?this.sHelperPoint.y<0?this._target.scrollUp(4):this._target.scrollDown(4):this.sHelperPoint.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},i}(t.GComponent);t.GScrollBar=e,egret.registerClass(e,"fairygui.GScrollBar")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._max=0,this._value=0,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._titleType=0,this._value=50,this._max=100,this._clickPos=new egret.Point}__extends(i,e);var n=__define,s=i;return p=s.prototype,n(p,"titleType",function(){return this._titleType},function(t){this._titleType=t}),n(p,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update())}),n(p,"value",function(){return this._value},function(t){this._value!=t&&(this._value=t,this.update())}),p.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},p.updateWidthPercent=function(e){if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*e)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max}this._barObjectH&&(this._barObjectH.width=(this.width-this._barMaxWidthDelta)*e),this._barObjectV&&(this._barObjectV.height=(this.height-this._barMaxHeightDelta)*e),this._aniObject instanceof t.GMovieClip?this._aniObject.frame=Math.round(100*e):this._aniObject instanceof t.GSwfObject&&(this._aniObject.frame=Math.round(100*e))},p.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.ToolSet.findChildNode(i,"Slider");var n;n=i.attributes.titleType,n&&(this._titleType=t.parseProgressTitleType(n)),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight),this._gripObject&&this._gripObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this)},p.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},p.setup_afterAdd=function(i){e.prototype.setup_afterAdd.call(this,i),i=t.ToolSet.findChildNode(i,"Slider"),i&&(this._value=parseInt(i.attributes.value),this._max=parseInt(i.attributes.max)),this.update()},p.__gripMouseDown=function(e){this._clickPos.x=e.stageX/t.GRoot.contentScaleFactor,this._clickPos.y=e.stageY/t.GRoot.contentScaleFactor,this._clickPercent=this._value/this._max,this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},p.__gripMouseMove=function(e){var i,n=e.stageX/t.GRoot.contentScaleFactor-this._clickPos.x,s=e.stageY/t.GRoot.contentScaleFactor-this._clickPos.y;i=this._barObjectH?this._clickPercent+n/this._barMaxWidth:this._clickPercent+s/this._barMaxHeight,i>1?i=1:0>i&&(i=0);var r=Math.round(this._max*i);r!=this._value&&(this._value=r,this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))),this.updateWidthPercent(i)},p.__gripMouseUp=function(){var t=this._value/this._max;this.updateWidthPercent(t),this._gripObject.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._gripObject.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},i}(t.GComponent);t.GSlider=e,egret.registerClass(e,"fairygui.GSlider")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._frame=0,this._playing=!0,this._gearAnimation=new t.GearAnimation(this)}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.createDisplayObject=function(){this._container=new t.UIContainer(this)},n(p,"playing",function(){return this._playing},function(t){this._playing!=t&&(this._playing=t,this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"frame",function(){return this._frame},function(t){this._frame!=t&&(this._frame=t,this._gearAnimation.controller&&this._gearAnimation.updateState())}),n(p,"gearAnimation",function(){return this._gearAnimation}),p.handleSizeChanged=function(){this._content&&(this._container.scaleX=this.width/this._sourceWidth*this.scaleX*t.GRoot.contentScaleFactor,this._container.scaleY=this.height/this._sourceHeight*this.scaleY*t.GRoot.contentScaleFactor)},p.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this._gearAnimation.controller==t&&this._gearAnimation.apply()},p.constructFromResource=function(){},i}(t.GObject);t.GSwfObject=e,egret.registerClass(e,"fairygui.GSwfObject",["fairygui.IAnimationGear"])}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(t){function e(){t.call(this),this.displayObject.touchChildren=!0,this._textField.type=egret.TextFieldType.INPUT}__extends(e,t);var i=__define,n=e;return p=n.prototype,p.dispose=function(){t.prototype.dispose.call(this)},i(p,"editable",function(){return this._textField.type==egret.TextFieldType.INPUT},function(t){t?this._textField.type==egret.TextFieldType.INPUT:this._textField.type==egret.TextFieldType.DYNAMIC}),i(p,"maxLength",function(){return this._textField.maxChars},function(t){this._textField.maxChars=t}),e}(t.GTextField);t.GTextInput=e,egret.registerClass(e,"fairygui.GTextInput")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){}var e=__define,i=t;return p=i.prototype,e(p,"controller",void 0,function(t){this._controller=t}),e(p,"index",function(){return this._id?this._controller.getPageIndexById(this._id):-1},function(t){this._id=this._controller.getPageId(t)}),e(p,"name",function(){return this._id?this._controller.getPageNameById(this._id):null},function(t){this._id=this._controller.getPageIdByName(t)}),p.clear=function(){this._id=null},e(p,"id",function(){return this._id},function(t){this._id=t}),t}();t.PageOption=e,egret.registerClass(e,"fairygui.PageOption")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this._items=[]}var e=__define,i=t;return p=i.prototype,e(p,"controller",void 0,function(t){this._controller=t}),p.add=function(t){void 0===t&&(t=0);var e=this._controller.getPageId(t),i=this._items.indexOf(e);-1==i&&this._items.push(e)},p.remove=function(t){void 0===t&&(t=0);var e=this._controller.getPageId(t),i=this._items.indexOf(e);-1!=i&&this._items.splice(i,1)},p.addByName=function(t){var e=this._controller.getPageIdByName(t),i=this._items.indexOf(e);-1!=i&&this._items.push(e)},p.removeByName=function(t){var e=this._controller.getPageIdByName(t),i=this._items.indexOf(e);-1!=i&&this._items.splice(i,1)},p.clear=function(){this._items.length=0},e(p,"empty",function(){return 0==this._items.length}),p.addById=function(t){this._items.push(t)},p.containsId=function(t){return-1!=this._items.indexOf(t)},t}();t.PageOptionSet=e,egret.registerClass(e,"fairygui.PageOptionSet")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(e){if(void 0===e&&(e=null),!e&&(e=t.UIConfig.popupMenu,!e))throw"UIConfig.popupMenu not defined";this._contentPane=t.UIPackage.createObjectFromURL(e).asCom,this._contentPane.addEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,14),this._list.removeRelation(this._contentPane,15),this._contentPane.addRelation(this._list,15),this._list.addEventListener(t.ItemEvent.CLICK,this.__clickItem,this)}var i=__define,n=e;return p=n.prototype,p.addItem=function(t,e){void 0===e&&(e=null);var i=this._list.addItemFromPool().asButton;i.title=t,i.data=e,i.menuItemGrayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},p.addItemAt=function(t,e,i){void 0===i&&(i=null);var n=this._list.getFromPool().asButton;this._list.addChildAt(n,e),n.title=t,n.data=i,n.menuItemGrayed=!1;var s=n.getController("checked");return null!=s&&(s.selectedIndex=0),n},p.addSeperator=function(){if(null==t.UIConfig.popupMenu_seperator)throw"UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(t.UIConfig.popupMenu_seperator)},p.getItemName=function(t){var e=this._list.getChildAt(t);return e.name},p.setItemText=function(t,e){var i=this._list.getChild(t).asButton;i.title=e},p.setItemVisible=function(t,e){var i=this._list.getChild(t).asButton;i.visible!=e&&(i.visible=e,this._list.setBoundsChangedFlag())},p.setItemGrayed=function(t,e){var i=this._list.getChild(t).asButton;i.menuItemGrayed=e},p.setItemCheckable=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(e?0==n.selectedIndex&&(n.selectedIndex=1):n.selectedIndex=0)},p.setItemChecked=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(n.selectedIndex=e?2:1)},p.isItemChecked=function(t){var e=this._list.getChild(t).asButton,i=e.getController("checked");return null!=i?2==i.selectedIndex:!1},p.removeItem=function(t){var e=this._list.getChild(t);if(null!=e){var i=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(i),!0}return!1},p.clearItems=function(){this._list.removeChildrenToPool()},i(p,"itemCount",function(){return this._list.numChildren}),i(p,"contentPane",function(){return this._contentPane}),i(p,"list",function(){return this._list}),p.show=function(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=e instanceof t.GRoot?e:null!=e?e.root:null;n||(n=t.GRoot.inst),e instanceof t.GRoot&&(e=null),n.showPopup(this.contentPane,e,i)},p.__clickItem=function(t){egret.setTimeout(this.__clickItem2,this,100,t)},p.__clickItem2=function(t){var e=t.itemObject.asButton;if(null!=e&&!e.menuItemGrayed){var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(i.selectedIndex=1==i.selectedIndex?2:1);var n=this._contentPane.parent;n.hidePopup(this.contentPane),null!=e.data&&(1==e.data.length?e.data(t):e.data())}},p.__addedToStage=function(){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10)},e}();t.PopupMenu=e,egret.registerClass(e,"fairygui.PopupMenu")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._owner=t,this._defs=new Array}var n=__define,s=e;return p=s.prototype,n(p,"owner",function(){return this._owner}),n(p,"target",function(){return this._target},function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))}),p.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var n=this._defs.length,s=0;n>s;s++){var r=this._defs[s];if(r.type==t)return}var a=new i;a.affectBySelfSizeChanged=t>=3&&6>=t||t>=10&&13>=t,a.percent=e,a.type=t,this._defs.push(a)},p.remove=function(t){if(void 0===t&&(t=0),24==t)return this.remove(14),void this.remove(15);for(var e=this._defs.length,i=0;e>i;i++)if(this._defs[i].type==t){this._defs.splice(i,1);break}},p.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var e=t._defs.length,n=0;e>n;n++){var s=t._defs[n],r=new i;r.copyFrom(s),this._defs.push(r)}},p.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},n(p,"isEmpty",function(){return 0==this._defs.length}),p.applyOnSelfResized=function(t,e){for(var i=this._owner.x,n=this._owner.y,s=this._defs.length,r=0;s>r;r++){var a=this._defs[r];if(a.affectBySelfSizeChanged)switch(a.type){case 3:case 5:this._owner.x-=t/2;break;case 4:case 6:this._owner.x-=t;break;case 10:case 12:this._owner.y-=e/2;break;case 11:case 13:this._owner.y-=e}}if((i!=this._owner.x||n!=this._owner.y)&&(i=this._owner.x-i,n=this._owner.y-n,null!=this._owner.gearXY.controller&&this._owner.gearXY.updateFromRelations(i,n),null!=this._owner.parent)){var o=this._owner.parent._transitions.length;if(o>0)for(var r=0;o>r;++r)this._owner.parent._transitions[r].updateFromRelations(this._owner.id,i,n)}},p.applyOnXYChanged=function(t,e,i){var n;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this._owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this._owner.y+=i;break;case 14:case 15:break;case 16:case 17:n=this._owner.x,this._owner.x+=e,this._owner.width=this._owner._rawWidth-(this._owner.x-n);break;case 18:case 19:this._owner.width=this._owner._rawWidth+e;break;case 20:case 21:n=this._owner.y,this._owner.y+=i,this._owner.height=this._owner._rawHeight-(this._owner.y-n);break;case 22:case 23:this._owner.height=this._owner._rawHeight+i}},p.applyOnSizeChanged=function(t){var e,i;this._target!=this._owner.parent?(e=this._target.x,i=this._target.y):(e=0,i=0);var n,s;switch(t.type){case 0:break;case 1:n=this._owner.x-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+this._target._rawWidth/2+n;break;case 2:n=this._owner.x-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+this._target._rawWidth+n;break;case 3:n=this._owner.x+this._owner._rawWidth/2-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+this._target._rawWidth/2+n-this._owner._rawWidth/2;break;case 4:n=this._owner.x+this._owner._rawWidth-e,t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+n-this._owner._rawWidth;break;case 5:n=this._owner.x+this._owner._rawWidth-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+this._target._rawWidth/2+n-this._owner._rawWidth;break;case 6:n=this._owner.x+this._owner._rawWidth-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.x=e+this._target._rawWidth+n-this._owner._rawWidth;break;case 7:break;case 8:n=this._owner.y-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+this._target._rawHeight/2+n;break;case 9:n=this._owner.y-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+this._target._rawHeight+n;break;case 10:n=this._owner.y+this._owner._rawHeight/2-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+this._target._rawHeight/2+n-this._owner._rawHeight/2;break;case 11:n=this._owner.y+this._owner._rawHeight-i,t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+n-this._owner._rawHeight;break;case 12:n=this._owner.y+this._owner._rawHeight-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+this._target._rawHeight/2+n-this._owner._rawHeight;break;case 13:n=this._owner.y+this._owner._rawHeight-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.y=i+this._target._rawHeight+n-this._owner._rawHeight;break;case 14:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target._initWidth:this._owner._rawWidth-this._targetWidth,t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.width=this._target._rawWidth+n;break;case 15:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target._initHeight:this._owner._rawHeight-this._targetHeight,t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.height=this._target._rawHeight+n;break;case 16:break;case 17:n=this._owner.x-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),s=this._owner.x,this._owner.x=e+this._target._rawWidth+n,this._owner.width=this._owner._rawWidth-(this._owner.x-s);break;case 18:break;case 19:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-(e+this._target._initWidth):this._owner.width-(e+this._targetWidth),this._owner!=this._target.parent&&(n+=this._owner.x),t.percent&&(n=n/this._targetWidth*this._target._rawWidth),this._owner.width=this._owner!=this._target.parent?e+this._target._rawWidth+n-this._owner.x:e+this._target._rawWidth+n;break;case 20:break;case 21:n=this._owner.y-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),s=this._owner.y,this._owner.y=i+this._target._rawHeight+n,this._owner.height=this._owner._rawHeight-(this._owner.y-s);break;case 22:break;case 23:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-(i+this._target._initHeight):this._owner._rawHeight-(i+this._targetHeight),this._owner!=this._target.parent&&(n+=this._owner.y),t.percent&&(n=n/this._targetHeight*this._target._rawHeight),this._owner.height=this._owner!=this._target.parent?i+this._target._rawHeight+n-this._owner.y:i+this._target._rawHeight+n}},p.addRefTarget=function(e){e!=this._owner.parent&&e.addEventListener(t.GObject.XY_CHANGED,this.__targetXYChanged,this),e.addEventListener(t.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),e.addEventListener(t.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._rawWidth,this._targetHeight=this._target._rawHeight},p.releaseRefTarget=function(e){e.removeEventListener(t.GObject.XY_CHANGED,this.__targetXYChanged,this),e.removeEventListener(t.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),e.removeEventListener(t.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this)},p.__targetXYChanged=function(){if(null==this._owner.relations.handling&&(null==this._owner.group||!this._owner.group._updating)){this._owner.relations.handling=this._target;for(var t=this._owner.x,e=this._owner.y,i=this._target.x-this._targetX,n=this._target.y-this._targetY,s=this._defs.length,r=0;s>r;r++){var a=this._defs[r];this.applyOnXYChanged(a,i,n)}if(this._targetX=this._target.x,this._targetY=this._target.y,(t!=this._owner.x||e!=this._owner.y)&&(t=this._owner.x-t,e=this._owner.y-e,null!=this._owner.gearXY.controller&&this._owner.gearXY.updateFromRelations(t,e),null!=this._owner.parent)){var o=this._owner.parent._transitions.length;if(o>0)for(var r=0;o>r;++r)this._owner.parent._transitions[r].updateFromRelations(this._owner.id,t,e)}this._owner.relations.handling=null}},p.__targetSizeChanged=function(){if(null==this._owner.relations.handling){this._owner.relations.handling=this._target;for(var t=this._owner.x,e=this._owner.y,i=this._defs.length,n=0;i>n;n++){var s=this._defs[n];this.applyOnSizeChanged(s)}if(this._targetWidth=this._target._rawWidth,this._targetHeight=this._target._rawHeight,(t!=this._owner.x||e!=this._owner.y)&&(t=this._owner.x-t,e=this._owner.y-e,null!=this._owner.gearXY.controller&&this._owner.gearXY.updateFromRelations(t,e),null!=this._owner.parent)){var r=this._owner.parent._transitions.length;if(r>0)for(var n=0;r>n;++n)this._owner.parent._transitions[n].updateFromRelations(this._owner.id,t,e)}this._owner.relations.handling=null}},p.__targetSizeWillChange=function(){this._owner.relations.sizeDirty=!0},e}();t.RelationItem=e,egret.registerClass(e,"fairygui.RelationItem");var i=function(){function t(){}var e=(__define,t);return p=e.prototype,p.copyFrom=function(t){this.affectBySelfSizeChanged=t.affectBySelfSizeChanged,this.percent=t.percent,this.type=t.type},t}();t.RelationDef=i,egret.registerClass(i,"fairygui.RelationDef")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(t){this._owner=t,this._items=new Array}var i=__define,n=e;
return p=n.prototype,p.add=function(e,i,n){void 0===n&&(n=!1);for(var s=this._items.length,r=0;s>r;r++){var a=this._items[r];if(a.target==e)return void a.add(i,n)}var o=new t.RelationItem(this._owner);o.target=e,o.add(i,n),this._items.push(o)},p.addItems=function(t,i){var n,s,r,a=i.split(",");for(r=0;2>r;r++)if(n=a[r]){"%"==n.charAt(n.length-1)?(n=n.substr(0,n.length-1),s=!0):s=!1;var o=n.indexOf("-");-1==o&&(n=n+"-"+n);var h=e.RELATION_NAMES.indexOf(n);if(-1==h)throw"invalid relation type";this.add(t,h,s)}},p.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;i>n;){var s=this._items[n];s.target==t?(s.remove(e),s.isEmpty?(s.dispose(),this._items.splice(n,1),i--):n++):n++}},p.contains=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.target==t)return!0}return!1},p.clearFor=function(t){for(var e=this._items.length,i=0;e>i;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},p.clearAll=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.dispose()}this._items.length=0},p.copyFrom=function(e){this.clearAll();for(var i=e._items,n=i.length,s=0;n>s;s++){var r=i[s],a=new t.RelationItem(this._owner);a.copyFrom(r),this._items.push(a)}},p.dispose=function(){this.clearAll()},p.onOwnerSizeChanged=function(t,e){if(0!=this._items.length)for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];s.applyOnSelfResized(t,e)}},p.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.target.ensureSizeCorrect()}}},i(p,"empty",function(){return 0==this._items.length}),p.setup=function(t){var e=t.children;if(e)for(var i,n,s=e.length,r=0;s>r;r++){var a=e[r];"relation"==a.name&&(i=a.attributes.target,n=this._owner.parent?i?this._owner.parent.getChildById(i):this._owner.parent:this._owner.getChildById(i),n&&this.addItems(n,a.attributes.sidePair))}},e.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"],e}();t.Relations=e,egret.registerClass(e,"fairygui.Relations")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(n,s,r,a,o,h){if(void 0===h&&(h=0),this._maskWidth=0,this._maskHeight=0,this._contentWidth=0,this._contentHeight=0,this._scrollType=0,this._scrollSpeed=0,this._mouseWheelSpeed=0,null==e._easeTypeFunc&&(e._easeTypeFunc=egret.Ease.cubicOut),this._throwTween=new i,this._owner=n,this._container=this._owner._rootContainer,this._maskHolder=new egret.DisplayObjectContainer,this._container.addChild(this._maskHolder),this._maskContentHolder=this._owner._container,this._maskContentHolder.x=0,this._maskContentHolder.y=0,this._maskHolder.addChild(this._maskContentHolder),this._holdArea=t.GRoot.touchScreen?20:5,this._holdAreaPoint=new egret.Point,this._margin=r,this._scrollBarMargin=a,this._bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,this._touchEffect=t.UIConfig.defaultScrollTouchEffect,this._xPerc=0,this._yPerc=0,this._aniFlag=!0,this._scrollBarVisible=!0,this._scrollSpeed=t.UIConfig.defaultScrollSpeed,this._mouseWheelSpeed=2*this._scrollSpeed,this._displayOnLeft=0!=(1&h),this._snapToItem=0!=(2&h),this._displayInDemand=0!=(4&h),this._scrollType=s,this._mouseWheelEnabled=!1,0==o&&(o=t.UIConfig.defaultScrollBarDisplay),3!=o){if((2==this._scrollType||1==this._scrollType)&&t.UIConfig.verticalScrollBar){if(this._vtScrollBar=t.UIPackage.createObjectFromURL(t.UIConfig.verticalScrollBar),!this._vtScrollBar)throw"cannot create scrollbar from "+t.UIConfig.verticalScrollBar;this._vtScrollBar.setScrollPane(this,!0),this._container.addChild(this._vtScrollBar.displayObject)}if((2==this._scrollType||0==this._scrollType)&&t.UIConfig.horizontalScrollBar){if(this._hzScrollBar=t.UIPackage.createObjectFromURL(t.UIConfig.horizontalScrollBar),!this._hzScrollBar)throw"cannot create scrollbar from "+t.UIConfig.horizontalScrollBar;this._hzScrollBar.setScrollPane(this,!1),this._container.addChild(this._hzScrollBar.displayObject)}this._scrollBarDisplayAuto=2==o,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}this._margin.left=r.left,this._margin.top=r.top,this._margin.right=r.right,this._margin.bottom=r.bottom,this._maskHolder.x=Math.round(this._displayOnLeft&&this._vtScrollBar?(this._margin.left+this._vtScrollBar.width)*t.GRoot.contentScaleFactor:this._margin.left*t.GRoot.contentScaleFactor),this._maskHolder.y=Math.round(this._margin.top*t.GRoot.contentScaleFactor),this._contentWidth=0,this._contentHeight=0,this.setSize(n.width,n.height),this.setContentSize(n.bounds.width,n.bounds.height),this._owner.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mouseDown,this)}var n=__define,s=e;return p=s.prototype,p.dispose=function(){this._owner.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mouseDown,this),this._container.removeChildren(),this._maskContentHolder.x=0,this._maskContentHolder.y=0,this._container.addChild(this._maskContentHolder)},n(p,"owner",function(){return this._owner}),n(p,"bouncebackEffect",function(){return this._bouncebackEffect},function(t){this._bouncebackEffect=t}),n(p,"touchEffect",function(){return this._touchEffect},function(t){this._touchEffect=t}),n(p,"scrollSpeed",function(){return this._scrollSpeed},function(){this._scrollSpeed=this.scrollSpeed,0==this._scrollSpeed&&(this._scrollSpeed=t.UIConfig.defaultScrollSpeed),this._mouseWheelSpeed=2*this._scrollSpeed}),n(p,"snapToItem",function(){return this._snapToItem},function(t){this._snapToItem=t}),n(p,"percX",function(){return this._xPerc},function(t){this.setPercX(t,!1)}),p.setPercX=function(t,e){void 0===e&&(e=!1),t>1?t=1:0>t&&(t=0),t!=this._xPerc&&(this._xPerc=t,this.posChanged(e))},n(p,"percY",function(){return this._yPerc},function(t){this.setPercY(t,!1)}),p.setPercY=function(t,e){void 0===e&&(e=!1),t>1?t=1:0>t&&(t=0),t!=this._yPerc&&(this._yPerc=t,this.posChanged(e))},n(p,"posX",function(){return this._xPerc*(this.contentWidth-this._maskWidth)},function(t){this.setPosX(t,!1)}),p.setPosX=function(t,e){void 0===e&&(e=!1),this.setPercX(t/(this.contentWidth-this._maskWidth),e)},n(p,"posY",function(){return this._yPerc*(this.contentHeight-this._maskHeight)},function(t){this.setPosY(t,!1)}),p.setPosY=function(t,e){void 0===e&&(e=!1),this.setPercY(t/(this.contentHeight-this._maskHeight),e)},n(p,"isBottomMost",function(){return 1==this._yPerc||this.contentHeight<=this._maskHeight}),n(p,"isRightMost",function(){return 1==this._xPerc||this.contentWidth<=this._maskWidth}),n(p,"contentWidth",function(){return this._owner.ensureBoundsCorrect(),this._contentWidth/t.GRoot.contentScaleFactor}),n(p,"contentHeight",function(){return this._owner.ensureBoundsCorrect(),this._contentHeight/t.GRoot.contentScaleFactor}),n(p,"viewWidth",function(){return this._maskWidth},function(t){t=t+this._margin.left+this._margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t}),n(p,"viewHeight",function(){return this._maskHeight},function(t){t=t+this._margin.top+this._margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t}),p.getDeltaX=function(t){return t/(this._contentWidth-this._maskWidth)},p.getDeltaY=function(t){return t/(this._contentHeight-this._maskHeight)},p.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},p.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},p.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this._yPerc-this.getDeltaY(this._scrollSpeed*t),e)},p.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this._yPerc+this.getDeltaY(this._scrollSpeed*t),e)},p.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this._xPerc-this.getDeltaX(this._scrollSpeed*t),e)},p.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this._xPerc+this.getDeltaX(this._scrollSpeed*t),e)},p.scrollToView=function(e,i){if(void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),t.GTimers.inst.exists(this.refresh,this)&&this.refresh(),this._vScroll){var n=(this._contentHeight-this._maskHeight)*this._yPerc,s=n+this._maskHeight;e.y<n?this.setPosY(e.y,i):e.y+e.height>s&&(e.y+2*e.height>=n?this.setPosY(e.y+2*e.height-this._maskHeight,i):this.setPosY(e.y+e.height-this._maskHeight,i))}if(this._hScroll){var r=(this._contentWidth-this._maskWidth)*this._xPerc,a=r+this._maskWidth;e.x<r?this.setPosX(e.x,i):e.x+e.width>a&&(e.x+2*e.width>=r?this.setPosX(e.x+2*e.width-this._maskWidth,i):this.setPosX(e.x+e.width-this._maskWidth,i))}!i&&t.GTimers.inst.exists(this.refresh,this)&&this.refresh()},p.isChildInView=function(t){if(this._vScroll){var e=(this._contentHeight-this._maskHeight)*this._yPerc,i=e+this._maskHeight;if(t.y+t.height<e||t.y>i)return!1}if(this._hScroll){var n=(this._contentWidth-this._maskWidth)*this._xPerc,s=n+this._maskWidth;if(t.x+t.width<n||t.x>s)return!1}return!0},p.setSize=function(t,e){var i,n;i=t,n=e,this._hzScrollBar&&(this._hScrollNone||(n-=this._hzScrollBar.height),this._hzScrollBar.y=n,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=i-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._displayOnLeft?this._scrollBarMargin.left+this._vtScrollBar.width:this._scrollBarMargin.left):(this._hzScrollBar.width=i-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._vScrollNone||(i-=this._vtScrollBar.width),this._displayOnLeft||(this._vtScrollBar.x=i),this._vtScrollBar.height=n-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),i-=this._margin.left+this._margin.right,n-=this._margin.top+this._margin.bottom,this._maskWidth=Math.max(1,i),this._maskHeight=Math.max(1,n),this.handleSizeChanged(),this.posChanged(!1)},p.setContentSize=function(e,i){e*=t.GRoot.contentScaleFactor,i*=t.GRoot.contentScaleFactor,(this._contentWidth!=e||this._contentHeight!=i)&&(this._contentWidth=e,this._contentHeight=i,this.handleSizeChanged(),this._aniFlag=!1,this.refresh())},p.handleSizeChanged=function(){switch(this._displayInDemand&&(this._vtScrollBar&&(this._contentHeight<=this._maskHeight?this._vScrollNone||(this._vScrollNone=!0,this._maskWidth+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._maskWidth-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentWidth<=this._maskWidth?this._hScrollNone||(this._hScrollNone=!0,this._maskHeight+=this._vtScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._maskHeight-=this._vtScrollBar.height))),this._vtScrollBar&&(this._maskHeight<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,this._vtScrollBar.displayPerc=0==this._contentHeight?0:Math.min(1,this._maskHeight/this._contentHeight))),this._hzScrollBar&&(this._maskWidth<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,this._hzScrollBar.displayPerc=0==this._contentWidth?0:Math.min(1,this._maskWidth/this._contentWidth))),this._maskHolder.mask=new egret.Rectangle(0,0,this._maskWidth*t.GRoot.contentScaleFactor,this._maskHeight*t.GRoot.contentScaleFactor),this._xOverlap=Math.ceil(Math.max(0,this._contentWidth-this._maskWidth)*t.GRoot.contentScaleFactor),this._yOverlap=Math.ceil(Math.max(0,this._contentHeight-this._maskHeight)*t.GRoot.contentScaleFactor),this._scrollType){case 2:this._contentWidth>this._maskWidth&&this._contentHeight<=this._maskHeight?(this._hScroll=!0,this._vScroll=!1):this._contentWidth<=this._maskWidth&&this._contentHeight>this._maskHeight?(this._hScroll=!1,this._vScroll=!0):this._contentWidth>this._maskWidth&&this._contentHeight>this._maskHeight?(this._hScroll=!0,this._vScroll=!0):(this._hScroll=!1,this._vScroll=!1);break;case 1:this._contentHeight>this._maskHeight?(this._hScroll=!1,this._vScroll=!0):(this._hScroll=!1,this._vScroll=!1);break;case 0:this._contentWidth>this._maskWidth?(this._hScroll=!0,this._vScroll=!1):(this._hScroll=!1,this._vScroll=!1)}},p.posChanged=function(e){this._aniFlag&&(this._aniFlag=e),t.GTimers.inst.callLater(this.refresh,this)},p.refresh=function(){if(this._isMouseMoved)return void t.GTimers.inst.callLater(this.refresh,this);t.GTimers.inst.remove(this.refresh,this);var i,n;if(this._vScroll&&(i=this._yPerc*(this._contentHeight-this._maskHeight)),this._hScroll&&(n=this._xPerc*(this._contentWidth-this._maskWidth)),this._snapToItem){var s=this._owner.findObjectNear(n,i);1!=this._xPerc&&s.x!=n&&(this._xPerc=s.x/(this._contentWidth-this._maskWidth),this._xPerc>1&&(this._xPerc=1),n=this._xPerc*(this._contentWidth-this._maskWidth)),1!=this._yPerc&&s.y!=i&&(this._yPerc=s.y/(this._contentHeight-this._maskHeight),this._yPerc>1&&(this._yPerc=1),i=this._yPerc*(this._contentHeight-this._maskHeight))}if(n=Math.floor(n*t.GRoot.contentScaleFactor),i=Math.floor(i*t.GRoot.contentScaleFactor),this._aniFlag){var r=this._maskContentHolder.x,a=this._maskContentHolder.y;this._vScroll?a=-i:0!=this._maskContentHolder.y&&(this._maskContentHolder.y=0),this._hScroll?r=-n:0!=this._maskContentHolder.x&&(this._maskContentHolder.x=0),(r!=this._maskContentHolder.x||a!=this._maskContentHolder.y)&&(this.killTweens(),this._maskHolder.touchEnabled=!1,this._tweening=1,egret.Tween.get(this._maskContentHolder,{onChange:this.__tweenUpdate,onChangeObj:this}).to({x:r,y:a},500,e._easeTypeFunc).call(this.__tweenComplete,this))}else this.killTweens(),this._maskContentHolder.y=this._vScroll?-i:0,this._maskContentHolder.x=this._hScroll?-n:0,this._vtScrollBar&&(this._vtScrollBar.scrollPerc=this._yPerc),this._hzScrollBar&&(this._hzScrollBar.scrollPerc=this._xPerc);this._aniFlag=!0},p.killTweens=function(){1==this._tweening?egret.Tween.pauseTweens(this._maskContentHolder):2==this._tweening&&(egret.Tween.pauseTweens(this._throwTween),this._throwTween.value=1,this.__tweenUpdate2(),this.__tweenComplete2()),this._tweening=0},p.calcYPerc=function(){if(!this._vScroll)return 0;var e,i=this._contentHeight-this._maskHeight,n=this._maskContentHolder.y/t.GRoot.contentScaleFactor;return e=n>0?0:-n>i?i:-n,e/i},p.calcXPerc=function(){if(!this._hScroll)return 0;var e,i=this._contentWidth-this._maskWidth,n=this._maskContentHolder.x/t.GRoot.contentScaleFactor;return e=n>0?0:-n>i?i:-n,e/i},p.onScrolling=function(){this._vtScrollBar&&(this._vtScrollBar.scrollPerc=this.calcYPerc(),this._scrollBarDisplayAuto&&this.showScrollBar(!0)),this._hzScrollBar&&(this._hzScrollBar.scrollPerc=this.calcXPerc(),this._scrollBarDisplayAuto&&this.showScrollBar(!0))},p.onScrollEnd=function(){this._vtScrollBar&&this._scrollBarDisplayAuto&&this.showScrollBar(!1),this._hzScrollBar&&this._scrollBarDisplayAuto&&this.showScrollBar(!1),this._tweening=0,this._owner.dispatchEventWith(e.SCROLL,!1)},p.__mouseDown=function(t){this._touchEffect&&(this.killTweens(),this._container.globalToLocal(t.stageX,t.stageY,e.sHelperPoint),this._x1=this._x2=this._maskContentHolder.x,this._y1=this._y2=this._maskContentHolder.y,this._xOffset=e.sHelperPoint.x-this._maskContentHolder.x,this._yOffset=e.sHelperPoint.y-this._maskContentHolder.y,this._time1=this._time2=egret.getTimer(),this._holdAreaPoint.x=e.sHelperPoint.x,this._holdAreaPoint.y=e.sHelperPoint.y,this._isHoldAreaDone=!1,this._isMouseMoved=!1,this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__mouseMove,this),this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseUp,this))},p.__mouseMove=function(t){var i,n,s,r;if(this._container.globalToLocal(t.stageX,t.stageY,e.sHelperPoint),1==this._scrollType){if(!this._isHoldAreaDone&&(i=Math.abs(this._holdAreaPoint.y-e.sHelperPoint.y),i<this._holdArea))return;n=!0}else if(0==this._scrollType){if(!this._isHoldAreaDone&&(i=Math.abs(this._holdAreaPoint.x-e.sHelperPoint.x),i<this._holdArea))return;s=!0}else{if(!this._isHoldAreaDone&&(i=Math.abs(this._holdAreaPoint.y-e.sHelperPoint.y),i<this._holdArea&&(i=Math.abs(this._holdAreaPoint.x-e.sHelperPoint.x),i<this._holdArea)))return;n=s=!0}var a=egret.getTimer();if(a-this._time2>50&&(this._time2=this._time1,this._time1=a,r=!0),n){var o=Math.floor(e.sHelperPoint.y-this._yOffset);this._maskContentHolder.y=o>0?this._bouncebackEffect?Math.floor(.5*o):0:o<-this._yOverlap?this._bouncebackEffect?Math.floor(.5*(o-this._yOverlap)):-Math.floor(this._yOverlap):o,r&&(this._y2=this._y1,this._y1=this._maskContentHolder.y),this._yPerc=this.calcYPerc()}if(s){var h=Math.floor(e.sHelperPoint.x-this._xOffset);this._maskContentHolder.x=h>0?this._bouncebackEffect?Math.floor(.5*h):0:h<0-this._xOverlap?this._bouncebackEffect?Math.floor(.5*(h-this._xOverlap)):-Math.floor(this._xOverlap):h,r&&(this._x2=this._x1,this._x1=this._maskContentHolder.x),this._xPerc=this.calcXPerc()}this._maskHolder.touchEnabled=!1,this._isHoldAreaDone=!0,this._isMouseMoved=!0,this.onScrolling(),this._owner.dispatchEventWith(e.SCROLL,!1)},p.__mouseUp=function(){if(!this._touchEffect)return void(this._isMouseMoved=!1);if(this._owner.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__mouseMove,this),this._owner.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseUp,this),this._isMouseMoved){this._isMouseMoved=!1;var n=(egret.getTimer()-this._time2)/1e3;0==n&&(n=.001);var s=(this._maskContentHolder.y-this._y2)/n,r=(this._maskContentHolder.x-this._x2)/n,a=.3,o=-this._xOverlap,h=-this._yOverlap,l=0,c=0;this._throwTween.start.x=this._maskContentHolder.x,this._throwTween.start.y=this._maskContentHolder.y;var _=this._throwTween.change1,u=this._throwTween.change2,d=0,p=0;if(2==this._scrollType||0==this._scrollType?(_.x=i.calculateChange(r,a),u.x=0,d=this._maskContentHolder.x+_.x):_.x=u.x=0,2==this._scrollType||1==this._scrollType?(_.y=i.calculateChange(s,a),u.y=0,p=this._maskContentHolder.y+_.y):_.y=u.y=0,this._snapToItem){d=-d,p=-p;var g=this._owner.findObjectNear(d,p);d=-g.x*t.GRoot.contentScaleFactor,p=-g.y*t.GRoot.contentScaleFactor,_.x=d-this._maskContentHolder.x,_.y=p-this._maskContentHolder.y}d>l?u.x=l-this._maskContentHolder.x-_.x:o>d&&(u.x=o-this._maskContentHolder.x-_.x),p>c?u.y=c-this._maskContentHolder.y-_.y:h>p&&(u.y=h-this._maskContentHolder.y-_.y),this._throwTween.value=0,this._throwTween.change1=_,this._throwTween.change2=u,this.killTweens(),this._tweening=2,egret.Tween.get(this._throwTween,{onChange:this.__tweenUpdate2,onChangeObj:this}).to({value:1},1e3*a,e._easeTypeFunc).call(this.__tweenComplete2,this)}},p.__rollOver=function(){this.showScrollBar(!0)},p.__rollOut=function(){this.showScrollBar(!1)},p.showScrollBar=function(e){e?(this.__showScrollBar(!0),t.GTimers.inst.remove(this.__showScrollBar,this)):t.GTimers.inst.add(500,1,this.__showScrollBar,this,e)},p.__showScrollBar=function(t){this._scrollBarVisible=t&&this._maskWidth>0&&this._maskHeight>0,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},p.__tweenUpdate=function(){this.onScrolling()},p.__tweenComplete=function(){this._maskHolder.touchEnabled=!0,this.onScrollEnd()},p.__tweenUpdate2=function(){this._throwTween.update(this._maskContentHolder),1==this._scrollType?this._yPerc=this.calcYPerc():0==this._scrollType?this._xPerc=this.calcXPerc():(this._yPerc=this.calcYPerc(),this._xPerc=this.calcXPerc()),this.onScrolling()},p.__tweenComplete2=function(){1==this._scrollType?this._yPerc=this.calcYPerc():0==this._scrollType?this._xPerc=this.calcXPerc():(this._yPerc=this.calcYPerc(),this._xPerc=this.calcXPerc()),this._maskHolder.touchEnabled=!0,this.onScrollEnd()},e.SCROLL="__scroll",e.sHelperPoint=new egret.Point,e}();t.ScrollPane=e,egret.registerClass(e,"fairygui.ScrollPane");var i=function(){function t(){this.start=new egret.Point,this.change1=new egret.Point,this.change2=new egret.Point}var e=(__define,t);return p=e.prototype,p.update=function(t){t.x=Math.floor(this.start.x+this.change1.x*this.value+this.change2.x*this.value*this.value),t.y=Math.floor(this.start.y+this.change1.y*this.value+this.change2.y*this.value*this.value)},t.calculateChange=function(e,i){return i*t.checkpoint*e/t.easeOutCubic(t.checkpoint,0,1,1)},t.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.checkpoint=.05,t}();egret.registerClass(i,"ThrowTween")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.lineHeight=0,this.glyphs={}}var e=(__define,t);return p=e.prototype,t}();t.BitmapFont=e,egret.registerClass(e,"fairygui.BitmapFont")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0}var e=(__define,t);return p=e.prototype,t}();t.BMGlyph=e,egret.registerClass(e,"fairygui.BMGlyph")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){}var e=(__define,t);return p=e.prototype,t.defaultFont="宋体",t.modalLayerColor=3355443,t.modalLayerAlpha=.2,t.buttonSoundVolumeScale=1,t.defaultScrollSpeed=25,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.defaultComboBoxVisibleItemCount=10,t}();t.UIConfig=e,egret.registerClass(e,"fairygui.UIConfig")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function t(){this._readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.URL=this.onTag_URL,this._handlers.IMG=this.onTag_IMG,this._handlers.B=this.onTag_Simple,this._handlers.I=this.onTag_Simple,this._handlers.U=this.onTag_Simple,this._handlers.SUP=this.onTag_Simple,this._handlers.SUB=this.onTag_Simple,this._handlers.COLOR=this.onTag_COLOR,this._handlers.FONT=this.onTag_FONT,this._handlers.SIZE=this.onTag_SIZE,this._handlers.MOVE=this.onTag_MOVE,this._handlers.FLY=this.onTag_FLY}var e=(__define,t);return p=e.prototype,p.onTag_URL=function(t,e,i){if(e)return"</a>";if(null!=i)return'<a href="'+i+'" target="_blank">';var n=this.getTagText();return'<a href="'+n+'" target="_blank">'},p.onTag_IMG=function(t,e){if(e)return null;var i=this.getTagText(!0);return i?this.defaultImgWidth?'<img src="'+i+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+i+'"/>':null},p.onTag_Simple=function(t,e){return e?"</"+t+">":"<"+t+">"},p.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},p.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},p.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},p.onTag_MOVE=function(t,e){return e?"</marquee>":'<marquee scrollamount="3">'},p.onTag_FLY=function(t,e){return e?"</marquee>":'<marquee behavior="alternate" scrollamount="3">'},p.getTagText=function(t){void 0===t&&(t=!1);var e=this._text.indexOf("[",this._readPos);if(-1==e)return null;var i=this._text.substring(this._readPos,e);return t&&(this._readPos=e),i},p.parse=function(t){this._text=t;for(var e,i,n,s,r,a,o=0,h=0;-1!=(e=this._text.indexOf("[",o))&&(o=e,e=this._text.indexOf("]",o),-1!=e);)i="/"==this._text.charAt(o+1),n=this._text.substring(i?o+2:o+1,e),e++,this._readPos=e,s=null,r=null,h=n.indexOf("="),-1!=h&&(s=n.substring(h+1),n=n.substring(0,h)),n=n.toUpperCase(),a=this._handlers[n],null!=a?(r=a.call(this,n,i,s),null==r&&(r=""),this._text=this._text.substring(0,o)+r+this._text.substring(this._readPos)):o=e;return this._text},t.inst=new t,t}();t.UBBParser=e,egret.registerClass(e,"fairygui.UBBParser")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}var i=(__define,e);return p=i.prototype,e.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("\\"),-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("."),-1!=e?t.substring(0,e):t},e.startsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},e.endsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},e.trim=function(t){return e.trimLeft(e.trimRight(t))},e.trimLeft=function(t){for(var e="",i=0;i<t.length&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i++);return t.substr(i)},e.trimRight=function(t){for(var e="",i=t.length-1;i>=0&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},e.convertToHtmlColor=function(t,e){void 0===e&&(e=!1);var i;i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),s=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),"#"+i+n+s+r},e.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},e.isUIObject=function(e){return e instanceof t.UIImage||e instanceof t.UIMovieClip||e instanceof t.UISprite||e instanceof t.UIContainer||e instanceof t.UITextField},e.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof egret.Stage);){if(e.isUIObject(t))return t.owner;t=t.parent}return null},e.findChildNode=function(t,e){var i=t.children;if(i)for(var n=i.length,s=0;n>s;s++){var r=i[s];if(r.name==e)return r}return null},e.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},e.parseUBB=function(t){return e.defaultUBBParser.parse(t)},e.defaultUBBParser=new t.UBBParser,e}();t.ToolSet=e,egret.registerClass(e,"fairygui.ToolSet")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){}var i=(__define,e);return p=i.prototype,e.setPackageItemExtension=function(t,i){e.packageItemExtensions[t.substring(5)]=i},e.setLoaderExtension=function(t){e.loaderExtension=t},e.newObject=function(i){switch(i.type){case 0:return new t.GImage;case 2:return new t.GMovieClip;case 1:return new t.GSwfObject;case 4:var n=e.packageItemExtensions[i.owner.id+i.id];if(n)return new n;var s=i.owner.getItemAsset(i),r=s.attributes.extention;if(null==r)return new t.GComponent;switch(r){case"Button":return new t.GButton;case"Label":return new t.GLabel;case"ProgressBar":return new t.GProgressBar;case"Slider":return new t.GSlider;case"ScrollBar":return new t.GScrollBar;case"ComboBox":return new t.GComboBox;default:return new t.GComponent}}return null},e.newObject2=function(i){switch(i){case"image":return new t.GImage;case"movieclip":return new t.GMovieClip;case"swf":return new t.GSwfObject;case"component":return new t.GComponent;case"text":return new t.GTextField;case"richtext":return new t.GRichTextField;case"group":return new t.GGroup;case"list":return new t.GList;case"graph":return new t.GGraph;case"loader":return null!=e.loaderExtension?new e.loaderExtension:new t.GLoader}return null},e.packageItemExtensions={},e}();t.UIObjectFactory=e,egret.registerClass(e,"fairygui.UIObjectFactory")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._items=new Array,this._sprites={}}var n=__define,s=e;return p=s.prototype,e.getById=function(t){return e._packageInstById[t]},e.getByName=function(t){return e._packageInstByName[t]},e.addPackage=function(t){var i=new e;return i.create(t),e._packageInstById[i.id]=i,e._packageInstByName[i.name]=i,i.customId=t,i},e.removePackage=function(t){var i=e._packageInstById[t];i.dispose(),delete e._packageInstById[i.id],null!=i._customId&&delete e._packageInstById[i._customId]},e.createObject=function(t,i,n){void 0===n&&(n=null);var s=e.getByName(t);return s?s.createObject(i,n):null},e.createObjectFromURL=function(t,i){void 0===i&&(i=null);var n=e.getItemByURL(t);return n?n.owner.createObject2(n,i):null},e.getItemURL=function(t,i){var n=e.getByName(t);if(!n)return null;var s=n._itemsByName[i];return s?"ui://"+n.id+s.id:null},e.getItemByURL=function(i){if(t.ToolSet.startsWith(i,"ui://")){var n=i.substr(5,8),s=i.substr(13),r=e.getById(n);if(r)return r.getItem(s)}return null},e.getBitmapFontByURL=function(t){return e._bitmapFonts[t]},p.create=function(t){this._resKey=t,this.loadPackage()},p.loadPackage=function(){var n,s;this.decompressPackage(RES.getRes(this._resKey)),n=this.getDesc("sprites.bytes"),s=n.split(e.sep1);for(var r=s.length,a=1;r>a;a++)if(n=s[a]){var o=n.split(e.sep2),h=new i,l=o[0],c=parseInt(o[1]);if(c>=0)h.atlas="atlas"+c;else{var _=l.indexOf("_");h.atlas=-1==_?"atlas_"+l:"atlas_"+l.substr(0,_)}h.rect.x=parseInt(o[2]),h.rect.y=parseInt(o[3]),h.rect.width=parseInt(o[4]),h.rect.height=parseInt(o[5]),h.rotated="1"==o[6],this._sprites[l]=h}n=this.getDesc("package.xml");var u=egret.XML.parse(n);this._id=u.attributes.id,this._name=u.attributes.name;var d=u.children[0].children;this._itemsById={},this._itemsByName={};for(var p,g,f=d.length,v=0;f>v;v++){switch(g=d[v],p=new t.PackageItem,p.type=t.parsePackageItemType(g.name),p.id=g.attributes.id,p.name=g.attributes.name,p.file=g.attributes.file,n=g.attributes.size,n&&(s=n.split(e.sep0),p.width=parseInt(s[0]),p.height=parseInt(s[1])),p.type){case 0:n=g.attributes.scale,"9grid"==n?(p.scale9Grid=new egret.Rectangle,n=g.attributes.scale9grid,n&&(s=n.split(e.sep0),p.scale9Grid.x=parseInt(s[0]),p.scale9Grid.y=parseInt(s[1]),p.scale9Grid.width=parseInt(s[2]),p.scale9Grid.height=parseInt(s[3]))):"tile"==n&&(p.scaleByTile=!0),n=g.attributes.smoothing,p.smoothing="false"!=n}p.owner=this,this._items.push(p),this._itemsById[p.id]=p,null!=p.name&&(this._itemsByName[p.name]=p)}for(r=this._items.length,a=0;r>a;a++)p=this._items[a],6==p.type&&(this.loadFont(p),e._bitmapFonts[p.bitmapFont.id]=p.bitmapFont)},p.decompressPackage=function(t){this._resData={};for(var e,i,n=new Zlib.RawInflate(t),s=n.decompress(),r=new egret.ByteArray,a=r.decodeUTF8(s),o=0;;){var h=a.indexOf("|",o);if(-1==h)break;e=a.substring(o,h),o=h+1,h=a.indexOf("|",o),i=parseInt(a.substring(o,h)),o=h+1,this._resData[e]=a.substr(o,i),o+=i}},p.dispose=function(){for(var t=this._items.length,i=0;t>i;i++){var n=this._items[i],s=n.texture;if(null!=s)s.dispose();else if(null!=n.frames)for(var r=n.frames.length,a=0;r>a;a++)s=n.frames[a].texture,null!=s&&s.dispose();else null!=n.bitmapFont&&delete e._bitmapFonts[n.bitmapFont.id]}},n(p,"id",function(){return this._id}),n(p,"name",function(){return this._name}),n(p,"customId",function(){return this._customId},function(t){null!=this._customId&&delete e._packageInstById[this._customId],this._customId=t,null!=this._customId&&(e._packageInstById[this._customId]=this)}),p.createObject=function(t,e){void 0===e&&(e=null);var i=this._itemsByName[t];return i?this.createObject2(i,e):null},p.createObject2=function(i,n){void 0===n&&(n=null);var s;return s=4==i.type&&null!=n?new n:t.UIObjectFactory.newObject(i),null==s?null:(e._constructing++,s.constructFromResource(i),e._constructing--,s)},p.getItem=function(t){return this._itemsById[t]},p.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw"Resource not found -"+t;return this.getItemAsset(e)},p.getItemAsset=function(e){switch(e.type){case 0:if(!e.decoded){e.decoded=!0;var i=this._sprites[e.id];null!=i&&(e.texture=this.createSpriteTexture(i))
}return e.texture;case 7:if(!e.decoded){e.decoded=!0;var n=null!=e.file&&e.file.length>0?e.file:e.id+".png";e.texture=RES.getRes(this._resKey+"@"+t.ToolSet.getFileName(n))}return e.texture;case 3:return e.decoded||(e.decoded=!0,e.sound=RES.getRes(this._resKey+"@"+e.id)),e.sound;case 6:return e.decoded||(e.decoded=!0,this.loadFont(e)),e.bitmapFont;case 2:return e.decoded||(e.decoded=!0,this.loadMovieClip(e)),e.frames;case 4:if(!e.decoded){e.decoded=!0;var s=this.getDesc(e.id+".xml");e.componentData=egret.XML.parse(s)}return e.componentData;default:return RES.getRes(this._resKey+"@"+e.id)}},p.getDesc=function(t){return this._resData[t]},p.createSpriteTexture=function(t){var e=this._itemsById[t.atlas];if(null!=e){var i=this.getItemAsset(e);return null==i?null:this.createSubTexture(i,t.rect)}return null},p.createSubTexture=function(t,e){var i=new egret.Texture;return i._bitmapData=t._bitmapData,i.$initData(t._bitmapX+e.x,t._bitmapY+e.y,e.width,e.height,0,0,e.width,e.height,t._sourceWidth,t._sourceHeight),i},p.loadMovieClip=function(i){var n=egret.XML.parse(this.getDesc(i.id+".xml"));i.pivot=new egret.Point;var s=n.attributes.pivot;if(s){var r=s.split(e.sep0);i.pivot.x=parseInt(r[0]),i.pivot.y=parseInt(r[1])}s=n.attributes.interval,null!=s&&(i.interval=parseInt(s)),s=n.attributes.swing,null!=s&&(i.swing="true"==s),s=n.attributes.repeatDelay,null!=s&&(i.repeatDelay=parseInt(s));var a=parseInt(n.attributes.frameCount);i.frames=new Array(a);for(var o=n.children[0].children,h=0;a>h;h++){var l=new t.Frame,c=o[h];s=c.attributes.rect,r=s.split(e.sep0),l.rect=new egret.Rectangle(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])),s=c.attributes.addDelay,s&&(l.addDelay=parseInt(s)),i.frames[h]=l;var _=this._sprites[i.id+"_"+h];null!=_&&(l.texture=this.createSpriteTexture(_))}},p.loadFont=function(i){var n=new t.BitmapFont;n.id="ui://"+this.id+i.id;var s,r,a=this.getDesc(i.id+".fnt"),o=a.split(e.sep1),h=o.length,l=0,c={},_=!1,u=0,d=0,p=0,g=0;for(l=0;h>l;l++)if(a=o[l],0!=a.length){a=t.ToolSet.trim(a);for(var f=a.split(e.sep2),v=1;v<f.length;v++){var m=f[v].split(e.sep3);c[m[0]]=m[1]}if(a=f[0],"char"==a){var y=new t.BMGlyph;y.x=isNaN(c.x)?0:parseInt(c.x),y.y=isNaN(c.y)?0:parseInt(c.y),y.offsetX=isNaN(c.xoffset)?0:parseInt(c.xoffset),y.offsetY=isNaN(c.yoffset)?0:parseInt(c.yoffset),y.width=isNaN(c.width)?0:parseInt(c.width),y.height=isNaN(c.height)?0:parseInt(c.height),y.advance=isNaN(c.xadvance)?0:parseInt(c.xadvance),void 0!=c.chnl&&(y.channel=parseInt(c.chnl),y.channel=15==y.channel?4:1==y.channel?3:2==y.channel?2:1),_?null!=r&&(y.texture=this.createSubTexture(r,new egret.Rectangle(y.x+p,y.y+g,y.width,y.height))):c.img&&(s=this._itemsById[c.img],null!=s&&(s.load(),y.width=s.width,y.height=s.height,y.texture=s.texture)),_?y.lineHeight=u:(0==y.advance&&(y.advance=0==d?y.offsetX+y.width:d),y.lineHeight=y.offsetY<0?y.height:y.offsetY+y.height,y.lineHeight<u&&(y.lineHeight=u)),y.offsetX*=t.GRoot.contentScaleFactor,y.offsetY*=t.GRoot.contentScaleFactor,y.width*=t.GRoot.contentScaleFactor,y.height*=t.GRoot.contentScaleFactor,y.advance*=t.GRoot.contentScaleFactor,y.lineHeight*=t.GRoot.contentScaleFactor,n.glyphs[String.fromCharCode(c.id)]=y}else if("info"==a){if(_=null!=c.face){var b=this._sprites[i.id];null!=b&&(p=b.rect.x,g=b.rect.y,r=this.createSpriteTexture(b))}}else"common"==a&&(isNaN(c.lineHeight)||(u=parseInt(c.lineHeight)),isNaN(c.xadvance)||(d=parseInt(c.xadvance)))}n.ttf=_,n.lineHeight=u*t.GRoot.contentScaleFactor,i.bitmapFont=n},e._constructing=0,e._packageInstById={},e._packageInstByName={},e._bitmapFonts={},e.sep0=",",e.sep1="\n",e.sep2=" ",e.sep3="=",e}();t.UIPackage=e,egret.registerClass(e,"fairygui.UIPackage");var i=function(){function t(){this.rect=new egret.Rectangle}var e=(__define,t);return p=e.prototype,t}();egret.registerClass(i,"AtlasSprite")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(e){function i(){e.call(this),this._requestingCmd=0,this.focusable=!0,this._uiSources=new Array,this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.__onShown,this),this.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__onHidden,this),this.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mouseDown,this,!0)}__extends(i,e);var n=__define,s=i;return p=s.prototype,p.addUISource=function(t){this._uiSources.push(t)},n(p,"contentPane",function(){return this._contentPane},function(t){this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,24),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))}),n(p,"frame",function(){return this._frame}),n(p,"closeButton",function(){return this._closeButton},function(t){null!=this._closeButton&&this._closeButton.removeClickListener(this.closeEventHandler,this),this._closeButton=t,null!=this._closeButton&&this._closeButton.addClickListener(this.closeEventHandler,this)}),n(p,"dragArea",function(){return this._dragArea},function(e){this._dragArea!=e&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.removeEventListener(t.DragEvent.DRAG_START,this.__dragStart,this)),this._dragArea=e,null!=this._dragArea&&(this._dragArea instanceof t.GGraph&&null==this._dragArea.displayObject&&this._dragArea.asGraph.drawRect(0,0,0,0,0),this._dragArea.draggable=!0,this._dragArea.addEventListener(t.DragEvent.DRAG_START,this.__dragStart,this)))}),n(p,"contentArea",function(){return this._contentArea},function(t){this._contentArea=t}),p.show=function(){t.GRoot.inst.showWindow(this)},p.showOn=function(t){t.showWindow(this)},p.hide=function(){this.isShowing&&this.doHideAnimation()},p.hideImmediately=function(){var e=this.parent instanceof t.GRoot?this.parent:null;e||(e=t.GRoot.inst),e.hideWindowImmediately(this)},p.center=function(e){void 0===e&&(e=!1);var i=this.root;i||(i=t.GRoot.inst),this.centerOn(i,e)},p.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round((t.width-this.width)/2),Math.round((t.height-this.height)/2)),e&&(this.addRelation(t,3),this.addRelation(t,10))},p.toggleStatus=function(){this.isTop?this.hide():this.show()},n(p,"isShowing",function(){return null!=this.parent}),n(p,"isTop",function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1}),n(p,"modal",function(){return this._modal},function(t){this._modal=t}),p.bringToFront=function(){var e=this.root;e||(e=t.GRoot.inst),e.showWindow(this)},p.showModalWait=function(e){void 0===e&&(e=0),0!=e&&(this._requestingCmd=e),t.UIConfig.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))},p.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)},p.closeModalWait=function(t){return void 0===t&&(t=0),0!=t&&this._requestingCmd!=t?!1:(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},n(p,"modalWaiting",function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent}),p.init=function(){if(!this._inited&&!this._loading)if(this._uiSources.length>0){this._loading=!1;for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];i.loaded||(i.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()},p.onInit=function(){},p.onShown=function(){},p.onHide=function(){},p.doShowAnimation=function(){this.onShown()},p.doHideAnimation=function(){this.hideImmediately()},p.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];if(!i.loaded)return}this._loading=!1,this._init()},p._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},p.dispose=function(){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__onShown,this),this.displayObject.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__onHidden,this),null!=this.parent&&this.hideImmediately(),e.prototype.dispose.call(this)},p.closeEventHandler=function(){this.hide()},p.__onShown=function(){this._inited?this.doShowAnimation():this.init()},p.__onHidden=function(){this.closeModalWait(),this.onHide()},p.__mouseDown=function(){if(this.isShowing){var t=this.root;t&&t.showWindow(this)}},p.__dragStart=function(t){t.preventDefault(),this.startDrag()},i}(t.GComponent);t.Window=e,egret.registerClass(e,"fairygui.Window")}(fairygui||(fairygui={}));var fairygui;!function(t){var e=function(){function e(){this._agent=new t.GLoader,this._agent.draggable=!0,this._agent.touchable=!1,this._agent.setSize(100,100),this._agent.sortingOrder=1e6,this._agent.addEventListener(t.DragEvent.DRAG_END,this.__dragEnd,this)}var i=__define,n=e;return p=n.prototype,i(e,"inst",function(){return null==e._inst&&(e._inst=new e),e._inst}),i(p,"dragAgent",function(){return this._agent}),i(p,"dragging",function(){return null!=this._agent.parent}),p.startDrag=function(e,i,n,s){if(void 0===s&&(s=-1),null==this._agent.parent){this._sourceData=n,this._agent.url=i,t.GRoot.inst.addChild(this._agent);var r=e.localToGlobal();this._agent.setXY(r.x,r.y),this._agent.startDrag(null,s)}},p.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),t.GRoot.inst.removeChild(this._agent),this._sourceData=null)},p.__dragEnd=function(e){if(null!=this._agent.parent){t.GRoot.inst.removeChild(this._agent);var i=this._sourceData;this._sourceData=null;for(var n=t.GRoot.inst.getObjectUnderPoint(e.stageX,e.stageY);null!=n;){if(n.hasEventListener(t.DropEvent.DROP)){var s=new t.DropEvent(t.DropEvent.DROP,i);return n.requestFocus(),void n.dispatchEvent(s)}n=n.parent}}},e}();t.DragDropManager=e,egret.registerClass(e,"fairygui.DragDropManager")}(fairygui||(fairygui={}));